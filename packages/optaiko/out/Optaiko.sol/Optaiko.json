{"abi":[{"type":"function","name":"UPGRADE_INTERFACE_VERSION","inputs":[],"outputs":[{"name":"","type":"string","internalType":"string"}],"stateMutability":"view"},{"type":"function","name":"acceptOwnership","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"accruedPremia","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"burnOption","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"getPosition","inputs":[{"name":"positionId","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"position","type":"tuple","internalType":"struct IOptaiko.OptionPosition","components":[{"name":"owner","type":"address","internalType":"address"},{"name":"poolId","type":"bytes32","internalType":"bytes32"},{"name":"legs","type":"tuple[]","internalType":"struct IOptaiko.Leg[]","components":[{"name":"isLong","type":"bool","internalType":"bool"},{"name":"tickLower","type":"int24","internalType":"int24"},{"name":"tickUpper","type":"int24","internalType":"int24"},{"name":"liquidity","type":"uint128","internalType":"uint128"}]},{"name":"openedAt","type":"uint256","internalType":"uint256"}]}],"stateMutability":"view"},{"type":"function","name":"initialize","inputs":[{"name":"_poolManager","type":"address","internalType":"address"},{"name":"_owner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"lastUpdateTimestamp","inputs":[{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"mintOption","inputs":[{"name":"poolId","type":"bytes32","internalType":"bytes32"},{"name":"legs","type":"tuple[]","internalType":"struct IOptaiko.Leg[]","components":[{"name":"isLong","type":"bool","internalType":"bool"},{"name":"tickLower","type":"int24","internalType":"int24"},{"name":"tickUpper","type":"int24","internalType":"int24"},{"name":"liquidity","type":"uint128","internalType":"uint128"}]}],"outputs":[{"name":"positionId","type":"uint256","internalType":"uint256"}],"stateMutability":"nonpayable"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"pendingOwner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"poolManager","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract IPoolManager"}],"stateMutability":"view"},{"type":"function","name":"proxiableUUID","inputs":[],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"renounceOwnership","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updatePoolManager","inputs":[{"name":"_newPoolManager","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"upgradeToAndCall","inputs":[{"name":"newImplementation","type":"address","internalType":"address"},{"name":"data","type":"bytes","internalType":"bytes"}],"outputs":[],"stateMutability":"payable"},{"type":"event","name":"Initialized","inputs":[{"name":"version","type":"uint64","indexed":false,"internalType":"uint64"}],"anonymous":false},{"type":"event","name":"OptionBurned","inputs":[{"name":"positionId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"owner","type":"address","indexed":true,"internalType":"address"},{"name":"settledPremium","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"OptionMinted","inputs":[{"name":"positionId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"owner","type":"address","indexed":true,"internalType":"address"},{"name":"poolId","type":"bytes32","indexed":false,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"OwnershipTransferStarted","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"PoolManagerUpdated","inputs":[{"name":"oldManager","type":"address","indexed":true,"internalType":"address"},{"name":"newManager","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"Upgraded","inputs":[{"name":"implementation","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"error","name":"AddressEmptyCode","inputs":[{"name":"target","type":"address","internalType":"address"}]},{"type":"error","name":"ERC1967InvalidImplementation","inputs":[{"name":"implementation","type":"address","internalType":"address"}]},{"type":"error","name":"ERC1967NonPayable","inputs":[]},{"type":"error","name":"FailedInnerCall","inputs":[]},{"type":"error","name":"InsufficientPremium","inputs":[]},{"type":"error","name":"InvalidInitialization","inputs":[]},{"type":"error","name":"InvalidPoolManager","inputs":[]},{"type":"error","name":"InvalidTickRange","inputs":[]},{"type":"error","name":"NotInitializing","inputs":[]},{"type":"error","name":"OptionAlreadyClosed","inputs":[]},{"type":"error","name":"OwnableInvalidOwner","inputs":[{"name":"owner","type":"address","internalType":"address"}]},{"type":"error","name":"OwnableUnauthorizedAccount","inputs":[{"name":"account","type":"address","internalType":"address"}]},{"type":"error","name":"PositionDoesNotExist","inputs":[]},{"type":"error","name":"ReentrancyGuardReentrantCall","inputs":[]},{"type":"error","name":"UUPSUnauthorizedCallContext","inputs":[]},{"type":"error","name":"UUPSUnsupportedProxiableUUID","inputs":[{"name":"slot","type":"bytes32","internalType":"bytes32"}]},{"type":"error","name":"Unauthorized","inputs":[]},{"type":"error","name":"ZeroLiquidity","inputs":[]}],"bytecode":{"object":"0x60a08060405234602957306080526110e6908161002e82396080518181816106b201526107810152f35b5f80fdfe60806040526004361015610011575f80fd5b5f3560e01c806306d0742314610b295780632ffe186c14610aff578063485cc955146109365780634f1ef2861461070657806352d1902d146106a0578063575247511461061f578063715018a6146105a257806379ba50971461055457806381ae634d14610445578063882ea4e11461041b5780638da5cb5b146103e7578063ad3cb1cc14610389578063dc4c90d314610362578063e30c39781461032e578063eb02c301146101515763f2fde38b146100c9575f80fd5b3461014d57602036600319011261014d576100e2610e2b565b6100ea610efc565b5f8051602061109183398151915280546001600160a01b0319166001600160a01b039283169081179091555f80516020611011833981519152549091167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e227005f80a3005b5f80fd5b3461014d57602036600319011261014d575f606060405161017181610e41565b82815282602082015281604082015201526004355f52600160205260405f206040519061019d82610e41565b80546001600160a01b03168252600181015460208301908152600282018054919290916001600160401b03811161031a57604051926101e260208360051b0185610e5c565b81845260208401905f5260205f205f915b8383106102c9575050505060408401918252600301546060840190815283519091906001600160a01b0316156102ba5760408051602080825295516001600160a01b0316868201529351908401525160806060840152805160a084018190525f9460c08501939201905b8086106102735750508293505160808301520390f35b9092602060806001926001600160801b03606088518051151584528581015160020b86850152604081015160020b604085015201511660608201520194019501949061025d565b63f7b3b39160e01b5f5260045ffd5b6001602081926040516102db81610e41565b6001600160801b03865460ff8116151583528060081c60020b8584015280851c60020b604084015260381c1660608201528152019201920191906101f3565b634e487b7160e01b5f52604160045260245ffd5b3461014d575f36600319011261014d575f80516020611091833981519152546040516001600160a01b039091168152602090f35b3461014d575f36600319011261014d575f546040516001600160a01b039091168152602090f35b3461014d575f36600319011261014d5760408051906103a88183610e5c565b600582526020820191640352e302e360dc1b83528151928391602083525180918160208501528484015e5f828201840152601f01601f19168101030190f35b3461014d575f36600319011261014d575f80516020611011833981519152546040516001600160a01b039091168152602090f35b3461014d57602036600319011261014d576004355f526002602052602060405f2054604051908152f35b3461014d57602036600319011261014d57600435610461610ec4565b5f818152600160205260409020546001600160a01b031633810361054657156102ba57805f52600260205260405f205490805f5260036020524260405f2055805f52600160205260405f205f81555f6001820155600281018054905f815581610528575b505060035f910155805f5260026020525f6040812055805f5260036020525f60408120556040519182527fde89f72b3e4f11843af04010c0e5b3110cf75cda1cacbd7466699eb9c27a422360203393a360015f8051602061105183398151915255005b5f5260205f20908101905b818110156104c5575f8155600101610533565b6282b42960e81b5f5260045ffd5b3461014d575f36600319011261014d575f8051602061109183398151915254336001600160a01b039091160361058f5761058d33610f1c565b005b63118cdaa760e01b5f523360045260245ffd5b3461014d575f36600319011261014d576105ba610efc565b5f8051602061109183398151915280546001600160a01b03199081169091555f80516020611011833981519152805491821690555f906001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a3005b3461014d57602036600319011261014d57610638610e2b565b610640610efc565b6001600160a01b03168015610691575f80546001600160a01b03198116831782556001600160a01b0316907f98ea7e41f981415a7f25f05c01f54351c0524b978d01a0446d0ff3bb92840fb79080a3005b63bc12814760e01b5f5260045ffd5b3461014d575f36600319011261014d577f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031630036106f75760206040515f805160206110318339815191528152f35b63703e46dd60e11b5f5260045ffd5b604036600319011261014d5761071a610e2b565b602435906001600160401b03821161014d573660238301121561014d5781600401359061074682610e7d565b916107546040519384610e5c565b8083526020830193366024838301011161014d57815f926024602093018737840101526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016308114908115610914575b506106f7576107b9610efc565b6040516352d1902d60e01b81526001600160a01b0382169390602081600481885afa5f91816108e0575b506107fb5784634c9c8ce360e01b5f5260045260245ffd5b805f805160206110318339815191528692036108ce5750823b156108bc575f8051602061103183398151915280546001600160a01b031916821790557fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b5f80a28251156108a3575f809161058d945190845af43d1561089b573d9161087f83610e7d565b9261088d6040519485610e5c565b83523d5f602085013e610fb2565b606091610fb2565b505050346108ad57005b63b398979f60e01b5f5260045ffd5b634c9c8ce360e01b5f5260045260245ffd5b632a87526960e21b5f5260045260245ffd5b9091506020813d60201161090c575b816108fc60209383610e5c565b8101031261014d575190866107e3565b3d91506108ef565b5f80516020611031833981519152546001600160a01b031614159050846107ac565b3461014d57604036600319011261014d5761094f610e2b565b6024356001600160a01b0381169081810361014d575f80516020611071833981519152549260ff8460401c1615936001600160401b03811680159081610af7575b6001149081610aed575b159081610ae4575b50610ad55767ffffffffffffffff1981166001175f805160206110718339815191525584610aa9575b506001600160a01b0316918215610691576109e4610f87565b6109ec610f87565b6109f4610f87565b15610a9657610a0290610f1c565b610a0a610f87565b610a12610f87565b60015f80516020611051833981519152556bffffffffffffffffffffffff60a01b5f5416175f55610a3f57005b68ff0000000000000000195f8051602061107183398151915254165f80516020611071833981519152557fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2602060405160018152a1005b631e4fbdf760e01b5f525f60045260245ffd5b68ffffffffffffffffff191668010000000000000001175f8051602061107183398151915255846109cb565b63f92ee8a960e01b5f5260045ffd5b905015866109a2565b303b15915061099a565b869150610990565b3461014d57602036600319011261014d576004355f526003602052602060405f2054604051908152f35b3461014d57604036600319011261014d576024356004356001600160401b03821161014d573660238301121561014d578160040135906001600160401b03821161014d576024830192602436918460071b01011161014d57610b89610ec4565b8115610dfa575f54916001600160401b038360a01c166001600160401b038114610e175760019094919401926001600160401b038416936001600160401b0360a01b9060a01b16906001600160401b0360a01b1916175f55825f52600160205260405f2093336bffffffffffffffffffffffff60a01b86541617855582600186015542600386015560025f9501945b818110610c755760208585815f52600383524260405f2055604051908152817fde12855a0c6484a94119c0040bafb90aa1955c1d51e8c3cb9dab95e3e5b67cc5843393a360015f8051602061105183398151915255604051908152f35b610c80818385610e98565b60808136031261014d5760405190610c9782610e41565b8035801515810361014d578252610cb060208201610ea8565b6020830190808252610cc460408401610ea8565b606060408601948286520135946001600160801b038616860361014d5760600194855260020b9060020b1215610e0957603c905160020b0760020b610e0957603c905160020b0760020b610e0957516001600160801b031615610dfa57610d2c818385610e98565b9086546801000000000000000081101561031a5760018101808955811015610de657875f5260205f200182359283151580940361014d57815490610d7260208201610eb6565b60081b6060610d8360408401610eb6565b60201b9201356001600160801b038116810361014d57600196600160381b600160b81b0363ffffff009260381b169460ff600160381b600160b81b031992169066ffffffffffffff191617169116179066ffffff00000000161717905501610c18565b634e487b7160e01b5f52603260045260245ffd5b630200e8a960e31b5f5260045ffd5b6264847d60e41b5f5260045ffd5b634e487b7160e01b5f52601160045260245ffd5b600435906001600160a01b038216820361014d57565b608081019081106001600160401b0382111761031a57604052565b90601f801991011681019081106001600160401b0382111761031a57604052565b6001600160401b03811161031a57601f01601f191660200190565b9190811015610de65760071b0190565b35908160020b820361014d57565b358060020b810361014d5790565b60025f805160206110518339815191525414610eed5760025f8051602061105183398151915255565b633ee5aeb560e01b5f5260045ffd5b5f80516020611011833981519152546001600160a01b0316330361058f57565b5f8051602061109183398151915280546001600160a01b03199081169091555f8051602061101183398151915280549182166001600160a01b0393841690811790915591167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a3565b60ff5f805160206110718339815191525460401c1615610fa357565b631afcd79f60e31b5f5260045ffd5b90610fd65750805115610fc757805190602001fd5b630a12f52160e11b5f5260045ffd5b81511580611007575b610fe7575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b15610fdf56fe9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c199300360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00f0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00237e158222e3e6968b72b9db0d8043aacf074ad9f650f0d1606b4d82ee432c00a2646970667358221220c75135b7e3a49d0000e51e01e0b565939fd9035edcc1c97b7329cf6370c8a05764736f6c634300081a0033","sourceMap":"2282:10774:1:-:0;;;;;;;1171:4:6;1163:13;;2282:10774:1;;;;;;1163:13:6;2282:10774:1;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x60806040526004361015610011575f80fd5b5f3560e01c806306d0742314610b295780632ffe186c14610aff578063485cc955146109365780634f1ef2861461070657806352d1902d146106a0578063575247511461061f578063715018a6146105a257806379ba50971461055457806381ae634d14610445578063882ea4e11461041b5780638da5cb5b146103e7578063ad3cb1cc14610389578063dc4c90d314610362578063e30c39781461032e578063eb02c301146101515763f2fde38b146100c9575f80fd5b3461014d57602036600319011261014d576100e2610e2b565b6100ea610efc565b5f8051602061109183398151915280546001600160a01b0319166001600160a01b039283169081179091555f80516020611011833981519152549091167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e227005f80a3005b5f80fd5b3461014d57602036600319011261014d575f606060405161017181610e41565b82815282602082015281604082015201526004355f52600160205260405f206040519061019d82610e41565b80546001600160a01b03168252600181015460208301908152600282018054919290916001600160401b03811161031a57604051926101e260208360051b0185610e5c565b81845260208401905f5260205f205f915b8383106102c9575050505060408401918252600301546060840190815283519091906001600160a01b0316156102ba5760408051602080825295516001600160a01b0316868201529351908401525160806060840152805160a084018190525f9460c08501939201905b8086106102735750508293505160808301520390f35b9092602060806001926001600160801b03606088518051151584528581015160020b86850152604081015160020b604085015201511660608201520194019501949061025d565b63f7b3b39160e01b5f5260045ffd5b6001602081926040516102db81610e41565b6001600160801b03865460ff8116151583528060081c60020b8584015280851c60020b604084015260381c1660608201528152019201920191906101f3565b634e487b7160e01b5f52604160045260245ffd5b3461014d575f36600319011261014d575f80516020611091833981519152546040516001600160a01b039091168152602090f35b3461014d575f36600319011261014d575f546040516001600160a01b039091168152602090f35b3461014d575f36600319011261014d5760408051906103a88183610e5c565b600582526020820191640352e302e360dc1b83528151928391602083525180918160208501528484015e5f828201840152601f01601f19168101030190f35b3461014d575f36600319011261014d575f80516020611011833981519152546040516001600160a01b039091168152602090f35b3461014d57602036600319011261014d576004355f526002602052602060405f2054604051908152f35b3461014d57602036600319011261014d57600435610461610ec4565b5f818152600160205260409020546001600160a01b031633810361054657156102ba57805f52600260205260405f205490805f5260036020524260405f2055805f52600160205260405f205f81555f6001820155600281018054905f815581610528575b505060035f910155805f5260026020525f6040812055805f5260036020525f60408120556040519182527fde89f72b3e4f11843af04010c0e5b3110cf75cda1cacbd7466699eb9c27a422360203393a360015f8051602061105183398151915255005b5f5260205f20908101905b818110156104c5575f8155600101610533565b6282b42960e81b5f5260045ffd5b3461014d575f36600319011261014d575f8051602061109183398151915254336001600160a01b039091160361058f5761058d33610f1c565b005b63118cdaa760e01b5f523360045260245ffd5b3461014d575f36600319011261014d576105ba610efc565b5f8051602061109183398151915280546001600160a01b03199081169091555f80516020611011833981519152805491821690555f906001600160a01b03167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a3005b3461014d57602036600319011261014d57610638610e2b565b610640610efc565b6001600160a01b03168015610691575f80546001600160a01b03198116831782556001600160a01b0316907f98ea7e41f981415a7f25f05c01f54351c0524b978d01a0446d0ff3bb92840fb79080a3005b63bc12814760e01b5f5260045ffd5b3461014d575f36600319011261014d577f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031630036106f75760206040515f805160206110318339815191528152f35b63703e46dd60e11b5f5260045ffd5b604036600319011261014d5761071a610e2b565b602435906001600160401b03821161014d573660238301121561014d5781600401359061074682610e7d565b916107546040519384610e5c565b8083526020830193366024838301011161014d57815f926024602093018737840101526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016308114908115610914575b506106f7576107b9610efc565b6040516352d1902d60e01b81526001600160a01b0382169390602081600481885afa5f91816108e0575b506107fb5784634c9c8ce360e01b5f5260045260245ffd5b805f805160206110318339815191528692036108ce5750823b156108bc575f8051602061103183398151915280546001600160a01b031916821790557fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b5f80a28251156108a3575f809161058d945190845af43d1561089b573d9161087f83610e7d565b9261088d6040519485610e5c565b83523d5f602085013e610fb2565b606091610fb2565b505050346108ad57005b63b398979f60e01b5f5260045ffd5b634c9c8ce360e01b5f5260045260245ffd5b632a87526960e21b5f5260045260245ffd5b9091506020813d60201161090c575b816108fc60209383610e5c565b8101031261014d575190866107e3565b3d91506108ef565b5f80516020611031833981519152546001600160a01b031614159050846107ac565b3461014d57604036600319011261014d5761094f610e2b565b6024356001600160a01b0381169081810361014d575f80516020611071833981519152549260ff8460401c1615936001600160401b03811680159081610af7575b6001149081610aed575b159081610ae4575b50610ad55767ffffffffffffffff1981166001175f805160206110718339815191525584610aa9575b506001600160a01b0316918215610691576109e4610f87565b6109ec610f87565b6109f4610f87565b15610a9657610a0290610f1c565b610a0a610f87565b610a12610f87565b60015f80516020611051833981519152556bffffffffffffffffffffffff60a01b5f5416175f55610a3f57005b68ff0000000000000000195f8051602061107183398151915254165f80516020611071833981519152557fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2602060405160018152a1005b631e4fbdf760e01b5f525f60045260245ffd5b68ffffffffffffffffff191668010000000000000001175f8051602061107183398151915255846109cb565b63f92ee8a960e01b5f5260045ffd5b905015866109a2565b303b15915061099a565b869150610990565b3461014d57602036600319011261014d576004355f526003602052602060405f2054604051908152f35b3461014d57604036600319011261014d576024356004356001600160401b03821161014d573660238301121561014d578160040135906001600160401b03821161014d576024830192602436918460071b01011161014d57610b89610ec4565b8115610dfa575f54916001600160401b038360a01c166001600160401b038114610e175760019094919401926001600160401b038416936001600160401b0360a01b9060a01b16906001600160401b0360a01b1916175f55825f52600160205260405f2093336bffffffffffffffffffffffff60a01b86541617855582600186015542600386015560025f9501945b818110610c755760208585815f52600383524260405f2055604051908152817fde12855a0c6484a94119c0040bafb90aa1955c1d51e8c3cb9dab95e3e5b67cc5843393a360015f8051602061105183398151915255604051908152f35b610c80818385610e98565b60808136031261014d5760405190610c9782610e41565b8035801515810361014d578252610cb060208201610ea8565b6020830190808252610cc460408401610ea8565b606060408601948286520135946001600160801b038616860361014d5760600194855260020b9060020b1215610e0957603c905160020b0760020b610e0957603c905160020b0760020b610e0957516001600160801b031615610dfa57610d2c818385610e98565b9086546801000000000000000081101561031a5760018101808955811015610de657875f5260205f200182359283151580940361014d57815490610d7260208201610eb6565b60081b6060610d8360408401610eb6565b60201b9201356001600160801b038116810361014d57600196600160381b600160b81b0363ffffff009260381b169460ff600160381b600160b81b031992169066ffffffffffffff191617169116179066ffffff00000000161717905501610c18565b634e487b7160e01b5f52603260045260245ffd5b630200e8a960e31b5f5260045ffd5b6264847d60e41b5f5260045ffd5b634e487b7160e01b5f52601160045260245ffd5b600435906001600160a01b038216820361014d57565b608081019081106001600160401b0382111761031a57604052565b90601f801991011681019081106001600160401b0382111761031a57604052565b6001600160401b03811161031a57601f01601f191660200190565b9190811015610de65760071b0190565b35908160020b820361014d57565b358060020b810361014d5790565b60025f805160206110518339815191525414610eed5760025f8051602061105183398151915255565b633ee5aeb560e01b5f5260045ffd5b5f80516020611011833981519152546001600160a01b0316330361058f57565b5f8051602061109183398151915280546001600160a01b03199081169091555f8051602061101183398151915280549182166001600160a01b0393841690811790915591167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a3565b60ff5f805160206110718339815191525460401c1615610fa357565b631afcd79f60e31b5f5260045ffd5b90610fd65750805115610fc757805190602001fd5b630a12f52160e11b5f5260045ffd5b81511580611007575b610fe7575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b15610fdf56fe9016d09d72d40fdae2fd8ceac6b6234c7706214fd39c1cd1e609a0528c199300360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc9b779b17422d0df92223018b32b4d1fa46e071723d6817e2486d003becc55f00f0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00237e158222e3e6968b72b9db0d8043aacf074ad9f650f0d1606b4d82ee432c00a2646970667358221220c75135b7e3a49d0000e51e01e0b565939fd9035edcc1c97b7329cf6370c8a05764736f6c634300081a0033","sourceMap":"2282:10774:1:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;:::i;:::-;2303:62:4;;:::i;:::-;-1:-1:-1;;;;;;;;;;;2282:10774:1;;-1:-1:-1;;;;;;2282:10774:1;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;2238:43:3;-1:-1:-1;;2238:43:3;2282:10774:1;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;9291:28;2282:10774;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;;;;;:::i;:::-;;;;;;;;-1:-1:-1;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;3275:48;2282:10774;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;3217:103:8;;:::i;:::-;2282:10774:1;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;8012:10;7994:28;;2282:10774;;8057:28;2282:10774;;;;;10662:13;2282:10774;;;;;;;;;;10726:19;2282:10774;;10760:15;2282:10774;;;;;;;;;;;;;;;;;;;;;10662:13;2282:10774;;;;;;;;;;;;;;10726:19;2282:10774;;;;;;;10662:13;2282:10774;;;;;;;;;;10726:19;2282:10774;;;;;;;;;;;;8757:52;2282:10774;8012:10;8757:52;;2282:10774;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;966:10:7;-1:-1:-1;;;;;2282:10774:1;;;2869:24:3;2865:96;;2989:6;966:10:7;2989:6:3;:::i;:::-;2282:10774:1;2865:96:3;2916:34;;;2282:10774:1;2916:34:3;966:10:7;2282:10774:1;;;;2916:34:3;2282:10774:1;;;;;;-1:-1:-1;;2282:10774:1;;;;2303:62:4;;:::i;:::-;-1:-1:-1;;;;;;;;;;;2282:10774:1;;-1:-1:-1;;;;;;2282:10774:1;;;;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;;;;-1:-1:-1;;;;;;;2282:10774:1;3975:40:4;-1:-1:-1;;3975:40:4;2282:10774:1;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;:::i;:::-;2303:62:4;;:::i;:::-;-1:-1:-1;;;;;2282:10774:1;12454:29;;2282:10774;;;;;-1:-1:-1;;;;;;2282:10774:1;;;;;;-1:-1:-1;;;;;2282:10774:1;;12627:47;;2282:10774;12627:47;2282:10774;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;5111:6:6;-1:-1:-1;;;;;2282:10774:1;5102:4:6;5094:23;5090:145;;2282:10774:1;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;5090:145:6;4865:29;;;2282:10774:1;5195:29:6;2282:10774:1;;5195:29:6;2282:10774:1;;;-1:-1:-1;;2282:10774:1;;;;;;:::i;:::-;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;4688:6:6;2282:10774:1;4679:4:6;4671:23;;;:120;;;;2282:10774:1;4654:251:6;;;2303:62:4;;:::i;:::-;2282:10774:1;;-1:-1:-1;;;6151:52:6;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;6151:52:6;;2282:10774:1;;6151:52:6;;;2282:10774:1;-1:-1:-1;6147:437:6;;2320:47:11;;;;2282:10774:1;6513:60:6;2282:10774:1;;;;6513:60:6;6147:437;6245:40;-1:-1:-1;;;;;;;;;;;6245:40:6;;;6241:120;;2263:29:11;;;:34;2259:119;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;-1:-1:-1;;;;;;2282:10774:1;;;;;2922:27:11;-1:-1:-1;;2922:27:11;2282:10774:1;;2964:15:11;:11;;2282:10774:1;4255:25:14;;4297:55;4255:25;;;;;;2282:10774:1;;;;;;;;;:::i;:::-;;;;;;;;:::i;:::-;;;;;;;;;4297:55:14;:::i;2282:10774:1:-;;;4297:55:14;:::i;2960:148:11:-;6648:9;;;;6644:70;;2282:10774:1;6644:70:11;6684:19;;;2282:10774:1;6684:19:11;2282:10774:1;;6684:19:11;2259:119;2320:47;;;2282:10774:1;2320:47:11;2282:10774:1;;;;2320:47:11;6241:120:6;6312:34;;;2282:10774:1;6312:34:6;2282:10774:1;;;;6312:34:6;6151:52;;;;2282:10774:1;6151:52:6;;2282:10774:1;6151:52:6;;;;;;2282:10774:1;6151:52:6;;;:::i;:::-;;;2282:10774:1;;;;;6151:52:6;;;;;;;-1:-1:-1;6151:52:6;;4671:120;-1:-1:-1;;;;;;;;;;;2282:10774:1;-1:-1:-1;;;;;2282:10774:1;4749:42:6;;;-1:-1:-1;4671:120:6;;;2282:10774:1;;;;;;-1:-1:-1;;2282:10774:1;;;;;;:::i;:::-;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;;;;4301:16:5;2282:10774:1;-1:-1:-1;;;;;2282:10774:1;;4726:16:5;;:34;;;;2282:10774:1;4805:1:5;4790:16;:50;;;;2282:10774:1;4855:13:5;:30;;;;2282:10774:1;4851:91:5;;;-1:-1:-1;;2282:10774:1;;4805:1:5;2282:10774:1;-1:-1:-1;;;;;;;;;;;2282:10774:1;;4979:67:5;;2282:10774:1;-1:-1:-1;;;;;;2282:10774:1;;4309:26;;2282:10774;;6893:76:5;;:::i;:::-;;;:::i;:::-;;;:::i;:::-;2076:26:4;2072:95;;2195:12;;;:::i;:::-;6893:76:5;;:::i;:::-;;;:::i;:::-;4805:1;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;;;;;;;5066:101:5;;2282:10774:1;5066:101:5;2282:10774:1;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;-1:-1:-1;;;;;;;;;;;2282:10774:1;5142:14:5;2282:10774:1;;;4805:1:5;2282:10774:1;;5142:14:5;2282:10774:1;2072:95:4;2125:31;;;2282:10774:1;2125:31:4;2282:10774:1;;;;;2125:31:4;4979:67:5;-1:-1:-1;;2282:10774:1;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;4979:67:5;;;4851:91;4908:23;;;2282:10774:1;4908:23:5;2282:10774:1;;4908:23:5;4855:30;4872:13;;;4855:30;;;4790:50;4818:4;4810:25;:30;;-1:-1:-1;4790:50:5;;4726:34;;;-1:-1:-1;4726:34:5;;2282:10774:1;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;3407:54;2282:10774;;;;;;;;;;;;;;;;;;;-1:-1:-1;;2282:10774:1;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;3217:103:8;;:::i;:::-;5773:15:1;;2282:10774;;;;;-1:-1:-1;;;;;2282:10774:1;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;6028:10;;2282:10774;;;;;;;;;6048:15;2282:10774;6048:15;;2282:10774;6102:15;6082:17;;;2282:10774;;;6847:13;;6572:313;6588:15;;;;;;2282:10774;;;;;;6082:17;2282:10774;;6102:15;2282:10774;;;;;;;;;6028:10;6999:44;6028:10;;6999:44;;2282:10774;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;;;;6605:3;6791:7;;;;;:::i;:::-;2282:10774;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;;;;;;11124:29;2282:10774;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;11334:18;2282:10774;;6866:7;;;;;:::i;:::-;2282:10774;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;:::i;:::-;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;-1:-1:-1;;;;;;;2282:10774:1;;;;;;;-1:-1:-1;;;;;;;2282:10774:1;;;;;;;;;;;;;;;;;;;;6577:9;;2282:10774;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;:::o;:::-;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;:::o;:::-;;;;;;;;;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;:::o;:::-;-1:-1:-1;;;;;2282:10774:1;;;;;;-1:-1:-1;;2282:10774:1;;;;:::o;:::-;;;;;;;;;;;;:::o;:::-;;;;;;;;;;:::o;:::-;;;;;;;;;;:::o;3326:384:8:-;1847:1;-1:-1:-1;;;;;;;;;;;2282:10774:1;3526:20:8;3522:88;;1847:1;-1:-1:-1;;;;;;;;;;;2282:10774:1;3326:384:8:o;3522:88::-;3569:30;;;-1:-1:-1;3569:30:8;;-1:-1:-1;3569:30:8;2658:162:4;-1:-1:-1;;;;;;;;;;;2282:10774:1;-1:-1:-1;;;;;2282:10774:1;966:10:7;2717:23:4;2713:101;;2658:162::o;2472:222:3:-;-1:-1:-1;;;;;;;;;;;2282:10774:1;;-1:-1:-1;;;;;;2282:10774:1;;;;;;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;;-1:-1:-1;;;;;2282:10774:1;;;;;;;;;;;3975:40:4;-1:-1:-1;;3975:40:4;2472:222:3:o;7084:141:5:-;2282:10774:1;-1:-1:-1;;;;;;;;;;;2282:10774:1;;;;7150:18:5;7146:73;;7084:141::o;7146:73::-;7191:17;;;-1:-1:-1;7191:17:5;;-1:-1:-1;7191:17:5;4625:582:14;;4797:8;;-1:-1:-1;2282:10774:1;;5874:21:14;:17;;6046:142;;;;;;5870:383;6225:17;;;5894:1;6225:17;;5894:1;6225:17;4793:408;2282:10774:1;;5045:22:14;:49;;;4793:408;5041:119;;5173:17;;:::o;5041:119::-;-1:-1:-1;;;5066:1:14;5121:24;;;-1:-1:-1;;;;;2282:10774:1;;;;5121:24:14;2282:10774:1;;;5121:24:14;5045:49;5071:18;;;:23;5045:49;","linkReferences":{},"immutableReferences":{"1118":[{"start":1714,"length":32},{"start":1921,"length":32}]}},"methodIdentifiers":{"UPGRADE_INTERFACE_VERSION()":"ad3cb1cc","acceptOwnership()":"79ba5097","accruedPremia(uint256)":"882ea4e1","burnOption(uint256)":"81ae634d","getPosition(uint256)":"eb02c301","initialize(address,address)":"485cc955","lastUpdateTimestamp(uint256)":"2ffe186c","mintOption(bytes32,(bool,int24,int24,uint128)[])":"06d07423","owner()":"8da5cb5b","pendingOwner()":"e30c3978","poolManager()":"dc4c90d3","proxiableUUID()":"52d1902d","renounceOwnership()":"715018a6","transferOwnership(address)":"f2fde38b","updatePoolManager(address)":"57524751","upgradeToAndCall(address,bytes)":"4f1ef286"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.26+commit.8a97fa7a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"AddressEmptyCode\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"ERC1967InvalidImplementation\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ERC1967NonPayable\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FailedInnerCall\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InsufficientPremium\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidInitialization\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidPoolManager\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidTickRange\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotInitializing\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OptionAlreadyClosed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"OwnableInvalidOwner\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"OwnableUnauthorizedAccount\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PositionDoesNotExist\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ReentrancyGuardReentrantCall\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"UUPSUnauthorizedCallContext\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"slot\",\"type\":\"bytes32\"}],\"name\":\"UUPSUnsupportedProxiableUUID\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroLiquidity\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"version\",\"type\":\"uint64\"}],\"name\":\"Initialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"settledPremium\",\"type\":\"uint256\"}],\"name\":\"OptionBurned\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"poolId\",\"type\":\"bytes32\"}],\"name\":\"OptionMinted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferStarted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"oldManager\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newManager\",\"type\":\"address\"}],\"name\":\"PoolManagerUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"Upgraded\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"UPGRADE_INTERFACE_VERSION\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"acceptOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"accruedPremia\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"burnOption\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"getPosition\",\"outputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"poolId\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"bool\",\"name\":\"isLong\",\"type\":\"bool\"},{\"internalType\":\"int24\",\"name\":\"tickLower\",\"type\":\"int24\"},{\"internalType\":\"int24\",\"name\":\"tickUpper\",\"type\":\"int24\"},{\"internalType\":\"uint128\",\"name\":\"liquidity\",\"type\":\"uint128\"}],\"internalType\":\"struct IOptaiko.Leg[]\",\"name\":\"legs\",\"type\":\"tuple[]\"},{\"internalType\":\"uint256\",\"name\":\"openedAt\",\"type\":\"uint256\"}],\"internalType\":\"struct IOptaiko.OptionPosition\",\"name\":\"position\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_poolManager\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"lastUpdateTimestamp\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"poolId\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"bool\",\"name\":\"isLong\",\"type\":\"bool\"},{\"internalType\":\"int24\",\"name\":\"tickLower\",\"type\":\"int24\"},{\"internalType\":\"int24\",\"name\":\"tickUpper\",\"type\":\"int24\"},{\"internalType\":\"uint128\",\"name\":\"liquidity\",\"type\":\"uint128\"}],\"internalType\":\"struct IOptaiko.Leg[]\",\"name\":\"legs\",\"type\":\"tuple[]\"}],\"name\":\"mintOption\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pendingOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"poolManager\",\"outputs\":[{\"internalType\":\"contract IPoolManager\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"proxiableUUID\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newPoolManager\",\"type\":\"address\"}],\"name\":\"updatePoolManager\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newImplementation\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"upgradeToAndCall\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Optaiko Team\",\"custom:security-contact\":\"security@optaiko.xyz\",\"details\":\"This contract implements a Panoptic-style options protocol where options are represented as positions in Uniswap V4 liquidity pools. The protocol allows users to: - Mint options (both long and short) by creating positions with specific tick ranges - Burn (close) positions to realize profits or losses - Collect streaming premia based on fees accrued from the underlying Uniswap V4 pool **Core Concepts:** 1. **Short Options**: When a user mints a short option, they deposit liquidity into a Uniswap V4 pool    at a specific tick range. This liquidity earns fees, which represent the \\\"streaming premium\\\"    that option sellers receive. 2. **Long Options**: When a user mints a long option, they conceptually \\\"borrow\\\" liquidity from the pool    (tracked via internal accounting). Long option holders pay streaming premia to short option holders. 3. **Multi-Leg Positions**: Users can create complex option strategies (e.g., spreads, straddles)    by combining multiple legs in a single position. 4. **Streaming Premia**: Unlike traditional options with one-time premiums, this protocol uses    a streaming model where premia accrue continuously based on liquidity utilization and fees. **Upgradeability:** This contract uses the UUPS (Universal Upgradeable Proxy Standard) pattern for upgradeability. Only the contract owner can authorize upgrades.\",\"errors\":{\"AddressEmptyCode(address)\":[{\"details\":\"There's no code at `target` (it is not a contract).\"}],\"ERC1967InvalidImplementation(address)\":[{\"details\":\"The `implementation` of the proxy is invalid.\"}],\"ERC1967NonPayable()\":[{\"details\":\"An upgrade function sees `msg.value > 0` that may be lost.\"}],\"FailedInnerCall()\":[{\"details\":\"A call to an address target failed. The target may have reverted.\"}],\"InvalidInitialization()\":[{\"details\":\"The contract is already initialized.\"}],\"NotInitializing()\":[{\"details\":\"The contract is not initializing.\"}],\"OwnableInvalidOwner(address)\":[{\"details\":\"The owner is not a valid owner account. (eg. `address(0)`)\"}],\"OwnableUnauthorizedAccount(address)\":[{\"details\":\"The caller account is not authorized to perform an operation.\"}],\"ReentrancyGuardReentrantCall()\":[{\"details\":\"Unauthorized reentrant call.\"}],\"UUPSUnauthorizedCallContext()\":[{\"details\":\"The call is from an unauthorized context.\"}],\"UUPSUnsupportedProxiableUUID(bytes32)\":[{\"details\":\"The storage `slot` is unsupported as a UUID.\"}]},\"events\":{\"Initialized(uint64)\":{\"details\":\"Triggered when the contract has been initialized or reinitialized.\"},\"Upgraded(address)\":{\"details\":\"Emitted when the implementation is upgraded.\"}},\"kind\":\"dev\",\"methods\":{\"acceptOwnership()\":{\"details\":\"The new owner accepts the ownership transfer.\"},\"burnOption(uint256)\":{\"details\":\"This function closes a position and settles all outstanding premia. The process involves: 1. Verifying the caller owns the position 2. Calculating and settling any accrued premia 3. For short legs: Removing liquidity from the Uniswap V4 pool 4. For long legs: Settling the internal accounting 5. Transferring tokens back to the user **Important Notes:** - Only the position owner can burn their position - Premium settlement occurs automatically during the burn - The position is deleted from storage after burning to save gas\",\"params\":{\"positionId\":\"The ID of the position to close\"}},\"getPosition(uint256)\":{\"details\":\"Returns all information about a position including owner, pool, legs, and timestamps\",\"params\":{\"positionId\":\"The ID of the position to query\"},\"returns\":{\"position\":\"The complete position data\"}},\"initialize(address,address)\":{\"details\":\"This function replaces the constructor for upgradeable contracts\",\"params\":{\"_owner\":\"The address of the contract owner\",\"_poolManager\":\"The address of the Uniswap V4 Pool Manager\"}},\"mintOption(bytes32,(bool,int24,int24,uint128)[])\":{\"details\":\"This function creates a new multi-leg option position. Each leg can be either: - A short leg (isLong = false): Deposits liquidity to the Uniswap V4 pool - A long leg (isLong = true): Conceptually borrows liquidity (tracked internally) **Important Notes:** - The caller must approve this contract to spend the required tokens before calling this function - All legs in a position share the same poolId - Tick ranges must align with the pool's tick spacing - For short legs, this contract will interact with the Uniswap V4 PoolManager to add liquidity\",\"params\":{\"legs\":\"Array of legs defining the option strategy\",\"poolId\":\"The Uniswap V4 Pool ID (derived from PoolKey)\"},\"returns\":{\"positionId\":\"The ID of the newly created position\"}},\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"pendingOwner()\":{\"details\":\"Returns the address of the pending owner.\"},\"proxiableUUID()\":{\"details\":\"Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the implementation. It is used to validate the implementation's compatibility when performing an upgrade. IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier.\"},\"renounceOwnership()\":{\"details\":\"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner.\"},\"transferOwnership(address)\":{\"details\":\"Starts the ownership transfer of the contract to a new account. Replaces the pending transfer if there is one. Can only be called by the current owner.\"},\"updatePoolManager(address)\":{\"details\":\"Only callable by the contract owner. Use with extreme caution as this changes the core dependency of the protocol.\",\"params\":{\"_newPoolManager\":\"The address of the new Pool Manager\"}},\"upgradeToAndCall(address,bytes)\":{\"custom:oz-upgrades-unsafe-allow-reachable\":\"delegatecall\",\"details\":\"Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call encoded in `data`. Calls {_authorizeUpgrade}. Emits an {Upgraded} event.\"}},\"stateVariables\":{\"_positionIdCounter\":{\"details\":\"Packed with poolManager in the same storage slot (address 160 bits + uint64 64 bits = 224 bits)\"},\"_positions\":{\"details\":\"Position IDs are auto-incremented starting from 1\"},\"accruedPremia\":{\"details\":\"Premia is tracked in the base currency of the pool\"},\"poolManager\":{\"details\":\"This is the core Uniswap V4 contract that manages all pools\"}},\"title\":\"Optaiko\",\"version\":1},\"userdoc\":{\"events\":{\"OptionBurned(uint256,address,uint256)\":{\"notice\":\"Emitted when an option position is burned (closed)\"},\"OptionMinted(uint256,address,bytes32)\":{\"notice\":\"Emitted when a new option position is minted\"},\"PoolManagerUpdated(address,address)\":{\"notice\":\"Emitted when the Pool Manager is updated\"}},\"kind\":\"user\",\"methods\":{\"accruedPremia(uint256)\":{\"notice\":\"Mapping to track accrued premia for each position\"},\"burnOption(uint256)\":{\"notice\":\"Burns (closes) an existing option position\"},\"getPosition(uint256)\":{\"notice\":\"Returns the details of a position\"},\"initialize(address,address)\":{\"notice\":\"Initializes the contract\"},\"lastUpdateTimestamp(uint256)\":{\"notice\":\"Mapping to track the last update timestamp for each position\"},\"mintOption(bytes32,(bool,int24,int24,uint128)[])\":{\"notice\":\"Mints a new option position\"},\"poolManager()\":{\"notice\":\"The Uniswap V4 Pool Manager contract\"},\"updatePoolManager(address)\":{\"notice\":\"Updates the Pool Manager address\"}},\"notice\":\"Core contract for the Optaiko options protocol built on top of Uniswap V4\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Optaiko.sol\":\"Optaiko\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=node_modules/@openzeppelin/contracts-upgradeable/\",\":@openzeppelin/contracts/=node_modules/@openzeppelin/contracts/\",\":@uniswap/v4-core/=node_modules/@uniswap/v4-core/src/\",\":ds-test/=node_modules/@uniswap/v4-core/lib/solmate/lib/ds-test/\",\":erc4626-tests/=node_modules/@uniswap/v4-core/lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=node_modules/forge-std/src/\",\":openzeppelin-contracts/=node_modules/@uniswap/v4-core/lib/openzeppelin-contracts/\",\":solmate/=node_modules/@uniswap/v4-core/lib/solmate/\"],\"viaIR\":true},\"sources\":{\"contracts/IOptaiko.sol\":{\"keccak256\":\"0xc8798d5682248cdf6e08cb227952d7e7b4f9488514005fbd068753fbde632150\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a7fbbb3cce1f5430d4bfd30e392b0cbc68a67ad9fd0d427f83ee9667efa8da2f\",\"dweb:/ipfs/QmPdvQtPP3SjwyUip5zBdtqXJk4cRq5vjaT2xDRuekhPvX\"]},\"contracts/Optaiko.sol\":{\"keccak256\":\"0xa4c4fa850eab2300d4782139c79bf41a98a1184e12b00af10d2837697f6cc9b5\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://d8a699771a56b1ac8a813b1029b24c2b405ad5ed12c6004ad8b2fac29a056fef\",\"dweb:/ipfs/QmSM99mdkpp3Vu5Nz8ch9Z9ayH9C33sugyw9MMACoBDkj9\"]},\"contracts/Optaiko_Layout.sol\":{\"keccak256\":\"0x76d20525175c7b9829a3628786a1c58f7048d9a361fe622410a2128ca89f3fa3\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://fbfc6417510b3278eb9bceadc92697cb811c52a1c359423655b6dd99b163b7a3\",\"dweb:/ipfs/QmQHTc5CJx6sDu2ixkfk7o1wWGm4HBoZkScDuqCzw7mKgc\"]},\"node_modules/@openzeppelin/contracts-upgradeable/access/Ownable2StepUpgradeable.sol\":{\"keccak256\":\"0xbca4a4f66d98028293dba695851d1b20d3e0ba2fff7453fb241f192fa3fc6b6f\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://013b3cfd9d1e34dad409c3b9a340860e8651e61cda509de33599fb5102f62fe7\",\"dweb:/ipfs/QmTVjDKofM9Nst8w8LAA3HHgi1eCnGYBpFb7Nbat71e2xz\"]},\"node_modules/@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol\":{\"keccak256\":\"0xc163fcf9bb10138631a9ba5564df1fa25db9adff73bd9ee868a8ae1858fe093a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9706d43a0124053d9880f6e31a59f31bc0a6a3dc1acd66ce0a16e1111658c5f6\",\"dweb:/ipfs/QmUFmfowzkRwGtDu36cXV9SPTBHJ3n7dG9xQiK5B28jTf2\"]},\"node_modules/@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\":{\"keccak256\":\"0x631188737069917d2f909d29ce62c4d48611d326686ba6683e26b72a23bfac0b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7a61054ae84cd6c4d04c0c4450ba1d6de41e27e0a2c4f1bcdf58f796b401c609\",\"dweb:/ipfs/QmUvtdp7X1mRVyC3CsHrtPbgoqWaXHp3S1ZR24tpAQYJWM\"]},\"node_modules/@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol\":{\"keccak256\":\"0x3f13b947637c4969c0644cab4ef399cdc4b67f101463b8775c5a43b118558e53\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c6683e6ade6985d394d32baaef5eea0d8b9ff0b3eca86ae413d6cdde114a9930\",\"dweb:/ipfs/QmdBE8T1BTddZxpdECMsb3KiCFyjNWmxcCddYrWFTXmWPj\"]},\"node_modules/@openzeppelin/contracts-upgradeable/utils/ContextUpgradeable.sol\":{\"keccak256\":\"0xdbef5f0c787055227243a7318ef74c8a5a1108ca3a07f2b3a00ef67769e1e397\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://08e39f23d5b4692f9a40803e53a8156b72b4c1f9902a88cd65ba964db103dab9\",\"dweb:/ipfs/QmPKn6EYDgpga7KtpkA8wV2yJCYGMtc9K4LkJfhKX2RVSV\"]},\"node_modules/@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol\":{\"keccak256\":\"0xb44e086e941292cdc7f440de51478493894ef0b1aeccb0c4047445919f667f74\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://942dad22fbdc1669f025540ba63aa3ccfad5f8458fc5d4525b31ebf272e7af45\",\"dweb:/ipfs/Qmdo4X2M82aM3AMoW2kf2jhYkSCyC4T1pHNd6obdsDFnAB\"]},\"node_modules/@openzeppelin/contracts/interfaces/draft-IERC1822.sol\":{\"keccak256\":\"0x2a1f9944df2015c081d89cd41ba22ffaf10aa6285969f0dc612b235cc448999c\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://ef381843676aec64421200ee85eaa0b1356a35f28b9fc67e746a6bbb832077d9\",\"dweb:/ipfs/QmY8aorMYA2TeTCnu6ejDjzb4rW4t7TCtW4GZ6LoxTFm7v\"]},\"node_modules/@openzeppelin/contracts/proxy/ERC1967/ERC1967Utils.sol\":{\"keccak256\":\"0x06a78f9b3ee3e6d0eb4e4cd635ba49960bea34cac1db8c0a27c75f2319f1fd65\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://547d21aa17f4f3f1a1a7edf7167beff8dd9496a0348d5588f15cc8a4b29d052a\",\"dweb:/ipfs/QmT16JtRQSWNpLo9W23jr6CzaMuTAcQcjJJcdRd8HLJ6cE\"]},\"node_modules/@openzeppelin/contracts/proxy/beacon/IBeacon.sol\":{\"keccak256\":\"0xc59a78b07b44b2cf2e8ab4175fca91e8eca1eee2df7357b8d2a8833e5ea1f64c\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://5aa4f07e65444784c29cd7bfcc2341b34381e4e5b5da9f0c5bd00d7f430e66fa\",\"dweb:/ipfs/QmWRMh4Q9DpaU9GvsiXmDdoNYMyyece9if7hnfLz7uqzWM\"]},\"node_modules/@openzeppelin/contracts/utils/Address.sol\":{\"keccak256\":\"0xaf28a975a78550e45f65e559a3ad6a5ad43b9b8a37366999abd1b7084eb70721\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b7bd24e224f67f65bfadf85dc2929fa965456bb2415478bd0125471b5ce35245\",\"dweb:/ipfs/QmRaydGr8BTHs1kvaZfsNU69pKzUAGFrvABn1KiRSbE51y\"]},\"node_modules/@openzeppelin/contracts/utils/StorageSlot.sol\":{\"keccak256\":\"0x32ba59b4b7299237c8ba56319110989d7978a039faf754793064e967e5894418\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://1ae50c8b562427df610cc4540c9bf104acca7ef8e2dcae567ae7e52272281e9c\",\"dweb:/ipfs/QmTHiadFCSJUPpRjNegc5SahmeU8bAoY8i9Aq6tVscbcKR\"]},\"node_modules/@uniswap/v4-core/src/interfaces/IExtsload.sol\":{\"keccak256\":\"0x80b53ca4907d6f0088c3b931f2b72cad1dc4615a95094d96bd0fb8dff8d5ba43\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://375c69148622aab7a3537d5fd37d373a8e9731022c8d87bdaee46233b0a99fe1\",\"dweb:/ipfs/QmXFjdoYRxsA5B1kyuxEXgNf3FBoL1zPvy26Qy8EtpdFRN\"]},\"node_modules/@uniswap/v4-core/src/interfaces/IExttload.sol\":{\"keccak256\":\"0xc6b68283ebd8d1c789df536756726eed51c589134bb20821b236a0d22a135937\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://294394f72dfc219689209f4130d85601dfd0d63c8d47578050d312db70f9b6c8\",\"dweb:/ipfs/QmTDMQ3oxCGHgEBU48a3Lp4S1rRjc8vVCxkhE5ZNej1bsY\"]},\"node_modules/@uniswap/v4-core/src/interfaces/IHooks.sol\":{\"keccak256\":\"0xc131ffa2d04c10a012fe715fe2c115811526b7ea34285cf0a04ce7ce8320da8d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://3b212358897db5d99c21244d88f97b2e788527552cb430629b472a8cc6289aec\",\"dweb:/ipfs/QmQtwV4dDe2RYk2ErLpaAX7U82jWh1L6Lw2HRuKDvBi84G\"]},\"node_modules/@uniswap/v4-core/src/interfaces/IPoolManager.sol\":{\"keccak256\":\"0xbdab3544da3d32dfdf7457baa94e17d5a3012952428559e013ffac45d067038e\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://ce95ff864468e37c76adf71df061d4f3d6f3a5ec1f9bc3aea090463bc72798f4\",\"dweb:/ipfs/QmSbWh1pLbz51yQF4HEu5NRhr8XVv9JYGEw1hq1HudAnCi\"]},\"node_modules/@uniswap/v4-core/src/interfaces/IProtocolFees.sol\":{\"keccak256\":\"0x32a666e588a2f66334430357bb1e2424fe7eebeb98a3364b1dd16eb6ccca9848\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://85751d302125881f72e5f8af051c2d5d9b1f606ebaea8ca7d04fccdd27cc252d\",\"dweb:/ipfs/QmeRwomeh9NWm6A6fgNA4KZPQZHPpdKsPQyYsHSFmvud7J\"]},\"node_modules/@uniswap/v4-core/src/interfaces/external/IERC20Minimal.sol\":{\"keccak256\":\"0xeccadf1bf69ba2eb51f2fe4fa511bc7bb05bbd6b9f9a3cb8e5d83d9582613e0f\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://118757369892687b99ef46ce28d6861f62c098285bd7687a4f17f7e44e5f81de\",\"dweb:/ipfs/QmUxqbYqQtcEwwFbb9e6BBMePEaSgN8C45v6RKubD4ib8d\"]},\"node_modules/@uniswap/v4-core/src/interfaces/external/IERC6909Claims.sol\":{\"keccak256\":\"0xa586f345739e52b0488a0fe40b6e375cce67fdd25758408b0efcb5133ad96a48\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://e8c557b7e52abdbbd82e415a1acc27921446a7fd090b7d4877e52be72619547f\",\"dweb:/ipfs/QmXE2KNPbXmGX8BQF3ei6zhzRTnhoTQg39XmqMnkhbr6QK\"]},\"node_modules/@uniswap/v4-core/src/libraries/CustomRevert.sol\":{\"keccak256\":\"0x111ed3031b6990c80a93ae35dde6b6ac0b7e6af471388fdd7461e91edda9b7de\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c9ea883c98d6ae1829160d0977bb5195761cfd5bc81692d0a941f45717f594cd\",\"dweb:/ipfs/QmZPwxzaeMNv536wzrAMrMswu7vMHuqPVpjcqL3YvCMoxt\"]},\"node_modules/@uniswap/v4-core/src/libraries/SafeCast.sol\":{\"keccak256\":\"0x42c4a24f996a14d358be397b71f7ec9d7daf666aaec78002c63315a6ee67aa86\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c3db86e2ba3679105fc32edec656c70282e1fede6cab11217702443f6c26fa59\",\"dweb:/ipfs/QmX4yaaSPdKQzYNRsezjTvZKsubzS8JRTEGFD3fPpTTCcj\"]},\"node_modules/@uniswap/v4-core/src/types/BalanceDelta.sol\":{\"keccak256\":\"0xa719c8fe51e0a9524280178f19f6851bcc3b3b60e73618f3d60905d35ae5569f\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7436928dc9de35c6c7c5c636cb51adaf295cfd590da83b19a004ae33cbec9ef9\",\"dweb:/ipfs/QmRJ9yZkUpzk4433GX3LgVVL8jwpbSYSUwXcucKisf3v4H\"]},\"node_modules/@uniswap/v4-core/src/types/BeforeSwapDelta.sol\":{\"keccak256\":\"0x2a774312d91285313d569da1a718c909655da5432310417692097a1d4dc83a78\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a2c7a0379955cff9c17ab9e61f95e42909aa5947c22740f86ce940d09856f782\",\"dweb:/ipfs/QmaAuo8UBYXsGrVuKh8iRoAAdqwtg1jDq515cW1ZRP5m9K\"]},\"node_modules/@uniswap/v4-core/src/types/Currency.sol\":{\"keccak256\":\"0x4a0b84b282577ff6f8acf13ec9f4d32dbb9348748b49611d00e68bee96609c93\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://45f9d62ab3d51b52957279e353853ba1547c3182c9a1e3d1846ada4a90263b01\",\"dweb:/ipfs/QmS8NG84ccQS1yXVD8cv3eKX7J1UKxuJhbUfHTQR2opKF5\"]},\"node_modules/@uniswap/v4-core/src/types/PoolId.sol\":{\"keccak256\":\"0x308311916ea0f5c2fd878b6a2751eb223d170a69e33f601fae56dfe3c5d392af\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://669c2cd7ac17690b5d8831e0bda72822376c3a04b36afed6d31df4d75fe60918\",\"dweb:/ipfs/QmT6EpkxqU8VF3WsgrZ66F3s1cCQRffR95z1HDYZz7ph6y\"]},\"node_modules/@uniswap/v4-core/src/types/PoolKey.sol\":{\"keccak256\":\"0xf89856e0580d7a4856d3187a76858377ccee9d59702d230c338d84388221b786\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6f3118fa189025695c37fdf0bdd1190f085ad097484d3c88cf4c56d1db65f639\",\"dweb:/ipfs/QmamXpgtB8GV1CaFLvqefPWSoikLDhMk1yU4heBnVzU8gi\"]},\"node_modules/@uniswap/v4-core/src/types/PoolOperation.sol\":{\"keccak256\":\"0x7a1a107fc1f2208abb2c9364c8c54e56e98dca27673e9441bed2b949b6382162\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://4ad2470383bc5595d5af17840c64971f457adac68895a4db41ba5c71a4478e07\",\"dweb:/ipfs/QmdwKhBHDZFuqXrR2BfDBD9r7rB2ULGQBznsajRTkTmL4c\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.26+commit.8a97fa7a"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"target","type":"address"}],"type":"error","name":"AddressEmptyCode"},{"inputs":[{"internalType":"address","name":"implementation","type":"address"}],"type":"error","name":"ERC1967InvalidImplementation"},{"inputs":[],"type":"error","name":"ERC1967NonPayable"},{"inputs":[],"type":"error","name":"FailedInnerCall"},{"inputs":[],"type":"error","name":"InsufficientPremium"},{"inputs":[],"type":"error","name":"InvalidInitialization"},{"inputs":[],"type":"error","name":"InvalidPoolManager"},{"inputs":[],"type":"error","name":"InvalidTickRange"},{"inputs":[],"type":"error","name":"NotInitializing"},{"inputs":[],"type":"error","name":"OptionAlreadyClosed"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"type":"error","name":"OwnableInvalidOwner"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"type":"error","name":"OwnableUnauthorizedAccount"},{"inputs":[],"type":"error","name":"PositionDoesNotExist"},{"inputs":[],"type":"error","name":"ReentrancyGuardReentrantCall"},{"inputs":[],"type":"error","name":"UUPSUnauthorizedCallContext"},{"inputs":[{"internalType":"bytes32","name":"slot","type":"bytes32"}],"type":"error","name":"UUPSUnsupportedProxiableUUID"},{"inputs":[],"type":"error","name":"Unauthorized"},{"inputs":[],"type":"error","name":"ZeroLiquidity"},{"inputs":[{"internalType":"uint64","name":"version","type":"uint64","indexed":false}],"type":"event","name":"Initialized","anonymous":false},{"inputs":[{"internalType":"uint256","name":"positionId","type":"uint256","indexed":true},{"internalType":"address","name":"owner","type":"address","indexed":true},{"internalType":"uint256","name":"settledPremium","type":"uint256","indexed":false}],"type":"event","name":"OptionBurned","anonymous":false},{"inputs":[{"internalType":"uint256","name":"positionId","type":"uint256","indexed":true},{"internalType":"address","name":"owner","type":"address","indexed":true},{"internalType":"bytes32","name":"poolId","type":"bytes32","indexed":false}],"type":"event","name":"OptionMinted","anonymous":false},{"inputs":[{"internalType":"address","name":"previousOwner","type":"address","indexed":true},{"internalType":"address","name":"newOwner","type":"address","indexed":true}],"type":"event","name":"OwnershipTransferStarted","anonymous":false},{"inputs":[{"internalType":"address","name":"previousOwner","type":"address","indexed":true},{"internalType":"address","name":"newOwner","type":"address","indexed":true}],"type":"event","name":"OwnershipTransferred","anonymous":false},{"inputs":[{"internalType":"address","name":"oldManager","type":"address","indexed":true},{"internalType":"address","name":"newManager","type":"address","indexed":true}],"type":"event","name":"PoolManagerUpdated","anonymous":false},{"inputs":[{"internalType":"address","name":"implementation","type":"address","indexed":true}],"type":"event","name":"Upgraded","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"UPGRADE_INTERFACE_VERSION","outputs":[{"internalType":"string","name":"","type":"string"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"acceptOwnership"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"accruedPremia","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"positionId","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"burnOption"},{"inputs":[{"internalType":"uint256","name":"positionId","type":"uint256"}],"stateMutability":"view","type":"function","name":"getPosition","outputs":[{"internalType":"struct IOptaiko.OptionPosition","name":"position","type":"tuple","components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"bytes32","name":"poolId","type":"bytes32"},{"internalType":"struct IOptaiko.Leg[]","name":"legs","type":"tuple[]","components":[{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"int24","name":"tickLower","type":"int24"},{"internalType":"int24","name":"tickUpper","type":"int24"},{"internalType":"uint128","name":"liquidity","type":"uint128"}]},{"internalType":"uint256","name":"openedAt","type":"uint256"}]}]},{"inputs":[{"internalType":"address","name":"_poolManager","type":"address"},{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"initialize"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"lastUpdateTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"bytes32","name":"poolId","type":"bytes32"},{"internalType":"struct IOptaiko.Leg[]","name":"legs","type":"tuple[]","components":[{"internalType":"bool","name":"isLong","type":"bool"},{"internalType":"int24","name":"tickLower","type":"int24"},{"internalType":"int24","name":"tickUpper","type":"int24"},{"internalType":"uint128","name":"liquidity","type":"uint128"}]}],"stateMutability":"nonpayable","type":"function","name":"mintOption","outputs":[{"internalType":"uint256","name":"positionId","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"pendingOwner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"poolManager","outputs":[{"internalType":"contract IPoolManager","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"proxiableUUID","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"renounceOwnership"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"address","name":"_newPoolManager","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"updatePoolManager"},{"inputs":[{"internalType":"address","name":"newImplementation","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"stateMutability":"payable","type":"function","name":"upgradeToAndCall"}],"devdoc":{"kind":"dev","methods":{"acceptOwnership()":{"details":"The new owner accepts the ownership transfer."},"burnOption(uint256)":{"details":"This function closes a position and settles all outstanding premia. The process involves: 1. Verifying the caller owns the position 2. Calculating and settling any accrued premia 3. For short legs: Removing liquidity from the Uniswap V4 pool 4. For long legs: Settling the internal accounting 5. Transferring tokens back to the user **Important Notes:** - Only the position owner can burn their position - Premium settlement occurs automatically during the burn - The position is deleted from storage after burning to save gas","params":{"positionId":"The ID of the position to close"}},"getPosition(uint256)":{"details":"Returns all information about a position including owner, pool, legs, and timestamps","params":{"positionId":"The ID of the position to query"},"returns":{"position":"The complete position data"}},"initialize(address,address)":{"details":"This function replaces the constructor for upgradeable contracts","params":{"_owner":"The address of the contract owner","_poolManager":"The address of the Uniswap V4 Pool Manager"}},"mintOption(bytes32,(bool,int24,int24,uint128)[])":{"details":"This function creates a new multi-leg option position. Each leg can be either: - A short leg (isLong = false): Deposits liquidity to the Uniswap V4 pool - A long leg (isLong = true): Conceptually borrows liquidity (tracked internally) **Important Notes:** - The caller must approve this contract to spend the required tokens before calling this function - All legs in a position share the same poolId - Tick ranges must align with the pool's tick spacing - For short legs, this contract will interact with the Uniswap V4 PoolManager to add liquidity","params":{"legs":"Array of legs defining the option strategy","poolId":"The Uniswap V4 Pool ID (derived from PoolKey)"},"returns":{"positionId":"The ID of the newly created position"}},"owner()":{"details":"Returns the address of the current owner."},"pendingOwner()":{"details":"Returns the address of the pending owner."},"proxiableUUID()":{"details":"Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the implementation. It is used to validate the implementation's compatibility when performing an upgrade. IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier."},"renounceOwnership()":{"details":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner."},"transferOwnership(address)":{"details":"Starts the ownership transfer of the contract to a new account. Replaces the pending transfer if there is one. Can only be called by the current owner."},"updatePoolManager(address)":{"details":"Only callable by the contract owner. Use with extreme caution as this changes the core dependency of the protocol.","params":{"_newPoolManager":"The address of the new Pool Manager"}},"upgradeToAndCall(address,bytes)":{"custom:oz-upgrades-unsafe-allow-reachable":"delegatecall","details":"Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call encoded in `data`. Calls {_authorizeUpgrade}. Emits an {Upgraded} event."}},"version":1},"userdoc":{"kind":"user","methods":{"accruedPremia(uint256)":{"notice":"Mapping to track accrued premia for each position"},"burnOption(uint256)":{"notice":"Burns (closes) an existing option position"},"getPosition(uint256)":{"notice":"Returns the details of a position"},"initialize(address,address)":{"notice":"Initializes the contract"},"lastUpdateTimestamp(uint256)":{"notice":"Mapping to track the last update timestamp for each position"},"mintOption(bytes32,(bool,int24,int24,uint128)[])":{"notice":"Mints a new option position"},"poolManager()":{"notice":"The Uniswap V4 Pool Manager contract"},"updatePoolManager(address)":{"notice":"Updates the Pool Manager address"}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=node_modules/@openzeppelin/contracts-upgradeable/","@openzeppelin/contracts/=node_modules/@openzeppelin/contracts/","@uniswap/v4-core/=node_modules/@uniswap/v4-core/src/","ds-test/=node_modules/@uniswap/v4-core/lib/solmate/lib/ds-test/","erc4626-tests/=node_modules/@uniswap/v4-core/lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=node_modules/forge-std/src/","openzeppelin-contracts/=node_modules/@uniswap/v4-core/lib/openzeppelin-contracts/","solmate/=node_modules/@uniswap/v4-core/lib/solmate/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/Optaiko.sol":"Optaiko"},"evmVersion":"cancun","libraries":{},"viaIR":true},"sources":{"contracts/IOptaiko.sol":{"keccak256":"0xc8798d5682248cdf6e08cb227952d7e7b4f9488514005fbd068753fbde632150","urls":["bzz-raw://a7fbbb3cce1f5430d4bfd30e392b0cbc68a67ad9fd0d427f83ee9667efa8da2f","dweb:/ipfs/QmPdvQtPP3SjwyUip5zBdtqXJk4cRq5vjaT2xDRuekhPvX"],"license":"MIT"},"contracts/Optaiko.sol":{"keccak256":"0xa4c4fa850eab2300d4782139c79bf41a98a1184e12b00af10d2837697f6cc9b5","urls":["bzz-raw://d8a699771a56b1ac8a813b1029b24c2b405ad5ed12c6004ad8b2fac29a056fef","dweb:/ipfs/QmSM99mdkpp3Vu5Nz8ch9Z9ayH9C33sugyw9MMACoBDkj9"],"license":"MIT"},"contracts/Optaiko_Layout.sol":{"keccak256":"0x76d20525175c7b9829a3628786a1c58f7048d9a361fe622410a2128ca89f3fa3","urls":["bzz-raw://fbfc6417510b3278eb9bceadc92697cb811c52a1c359423655b6dd99b163b7a3","dweb:/ipfs/QmQHTc5CJx6sDu2ixkfk7o1wWGm4HBoZkScDuqCzw7mKgc"],"license":"MIT"},"node_modules/@openzeppelin/contracts-upgradeable/access/Ownable2StepUpgradeable.sol":{"keccak256":"0xbca4a4f66d98028293dba695851d1b20d3e0ba2fff7453fb241f192fa3fc6b6f","urls":["bzz-raw://013b3cfd9d1e34dad409c3b9a340860e8651e61cda509de33599fb5102f62fe7","dweb:/ipfs/QmTVjDKofM9Nst8w8LAA3HHgi1eCnGYBpFb7Nbat71e2xz"],"license":"MIT"},"node_modules/@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol":{"keccak256":"0xc163fcf9bb10138631a9ba5564df1fa25db9adff73bd9ee868a8ae1858fe093a","urls":["bzz-raw://9706d43a0124053d9880f6e31a59f31bc0a6a3dc1acd66ce0a16e1111658c5f6","dweb:/ipfs/QmUFmfowzkRwGtDu36cXV9SPTBHJ3n7dG9xQiK5B28jTf2"],"license":"MIT"},"node_modules/@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol":{"keccak256":"0x631188737069917d2f909d29ce62c4d48611d326686ba6683e26b72a23bfac0b","urls":["bzz-raw://7a61054ae84cd6c4d04c0c4450ba1d6de41e27e0a2c4f1bcdf58f796b401c609","dweb:/ipfs/QmUvtdp7X1mRVyC3CsHrtPbgoqWaXHp3S1ZR24tpAQYJWM"],"license":"MIT"},"node_modules/@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol":{"keccak256":"0x3f13b947637c4969c0644cab4ef399cdc4b67f101463b8775c5a43b118558e53","urls":["bzz-raw://c6683e6ade6985d394d32baaef5eea0d8b9ff0b3eca86ae413d6cdde114a9930","dweb:/ipfs/QmdBE8T1BTddZxpdECMsb3KiCFyjNWmxcCddYrWFTXmWPj"],"license":"MIT"},"node_modules/@openzeppelin/contracts-upgradeable/utils/ContextUpgradeable.sol":{"keccak256":"0xdbef5f0c787055227243a7318ef74c8a5a1108ca3a07f2b3a00ef67769e1e397","urls":["bzz-raw://08e39f23d5b4692f9a40803e53a8156b72b4c1f9902a88cd65ba964db103dab9","dweb:/ipfs/QmPKn6EYDgpga7KtpkA8wV2yJCYGMtc9K4LkJfhKX2RVSV"],"license":"MIT"},"node_modules/@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol":{"keccak256":"0xb44e086e941292cdc7f440de51478493894ef0b1aeccb0c4047445919f667f74","urls":["bzz-raw://942dad22fbdc1669f025540ba63aa3ccfad5f8458fc5d4525b31ebf272e7af45","dweb:/ipfs/Qmdo4X2M82aM3AMoW2kf2jhYkSCyC4T1pHNd6obdsDFnAB"],"license":"MIT"},"node_modules/@openzeppelin/contracts/interfaces/draft-IERC1822.sol":{"keccak256":"0x2a1f9944df2015c081d89cd41ba22ffaf10aa6285969f0dc612b235cc448999c","urls":["bzz-raw://ef381843676aec64421200ee85eaa0b1356a35f28b9fc67e746a6bbb832077d9","dweb:/ipfs/QmY8aorMYA2TeTCnu6ejDjzb4rW4t7TCtW4GZ6LoxTFm7v"],"license":"MIT"},"node_modules/@openzeppelin/contracts/proxy/ERC1967/ERC1967Utils.sol":{"keccak256":"0x06a78f9b3ee3e6d0eb4e4cd635ba49960bea34cac1db8c0a27c75f2319f1fd65","urls":["bzz-raw://547d21aa17f4f3f1a1a7edf7167beff8dd9496a0348d5588f15cc8a4b29d052a","dweb:/ipfs/QmT16JtRQSWNpLo9W23jr6CzaMuTAcQcjJJcdRd8HLJ6cE"],"license":"MIT"},"node_modules/@openzeppelin/contracts/proxy/beacon/IBeacon.sol":{"keccak256":"0xc59a78b07b44b2cf2e8ab4175fca91e8eca1eee2df7357b8d2a8833e5ea1f64c","urls":["bzz-raw://5aa4f07e65444784c29cd7bfcc2341b34381e4e5b5da9f0c5bd00d7f430e66fa","dweb:/ipfs/QmWRMh4Q9DpaU9GvsiXmDdoNYMyyece9if7hnfLz7uqzWM"],"license":"MIT"},"node_modules/@openzeppelin/contracts/utils/Address.sol":{"keccak256":"0xaf28a975a78550e45f65e559a3ad6a5ad43b9b8a37366999abd1b7084eb70721","urls":["bzz-raw://b7bd24e224f67f65bfadf85dc2929fa965456bb2415478bd0125471b5ce35245","dweb:/ipfs/QmRaydGr8BTHs1kvaZfsNU69pKzUAGFrvABn1KiRSbE51y"],"license":"MIT"},"node_modules/@openzeppelin/contracts/utils/StorageSlot.sol":{"keccak256":"0x32ba59b4b7299237c8ba56319110989d7978a039faf754793064e967e5894418","urls":["bzz-raw://1ae50c8b562427df610cc4540c9bf104acca7ef8e2dcae567ae7e52272281e9c","dweb:/ipfs/QmTHiadFCSJUPpRjNegc5SahmeU8bAoY8i9Aq6tVscbcKR"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/interfaces/IExtsload.sol":{"keccak256":"0x80b53ca4907d6f0088c3b931f2b72cad1dc4615a95094d96bd0fb8dff8d5ba43","urls":["bzz-raw://375c69148622aab7a3537d5fd37d373a8e9731022c8d87bdaee46233b0a99fe1","dweb:/ipfs/QmXFjdoYRxsA5B1kyuxEXgNf3FBoL1zPvy26Qy8EtpdFRN"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/interfaces/IExttload.sol":{"keccak256":"0xc6b68283ebd8d1c789df536756726eed51c589134bb20821b236a0d22a135937","urls":["bzz-raw://294394f72dfc219689209f4130d85601dfd0d63c8d47578050d312db70f9b6c8","dweb:/ipfs/QmTDMQ3oxCGHgEBU48a3Lp4S1rRjc8vVCxkhE5ZNej1bsY"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/interfaces/IHooks.sol":{"keccak256":"0xc131ffa2d04c10a012fe715fe2c115811526b7ea34285cf0a04ce7ce8320da8d","urls":["bzz-raw://3b212358897db5d99c21244d88f97b2e788527552cb430629b472a8cc6289aec","dweb:/ipfs/QmQtwV4dDe2RYk2ErLpaAX7U82jWh1L6Lw2HRuKDvBi84G"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/interfaces/IPoolManager.sol":{"keccak256":"0xbdab3544da3d32dfdf7457baa94e17d5a3012952428559e013ffac45d067038e","urls":["bzz-raw://ce95ff864468e37c76adf71df061d4f3d6f3a5ec1f9bc3aea090463bc72798f4","dweb:/ipfs/QmSbWh1pLbz51yQF4HEu5NRhr8XVv9JYGEw1hq1HudAnCi"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/interfaces/IProtocolFees.sol":{"keccak256":"0x32a666e588a2f66334430357bb1e2424fe7eebeb98a3364b1dd16eb6ccca9848","urls":["bzz-raw://85751d302125881f72e5f8af051c2d5d9b1f606ebaea8ca7d04fccdd27cc252d","dweb:/ipfs/QmeRwomeh9NWm6A6fgNA4KZPQZHPpdKsPQyYsHSFmvud7J"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/interfaces/external/IERC20Minimal.sol":{"keccak256":"0xeccadf1bf69ba2eb51f2fe4fa511bc7bb05bbd6b9f9a3cb8e5d83d9582613e0f","urls":["bzz-raw://118757369892687b99ef46ce28d6861f62c098285bd7687a4f17f7e44e5f81de","dweb:/ipfs/QmUxqbYqQtcEwwFbb9e6BBMePEaSgN8C45v6RKubD4ib8d"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/interfaces/external/IERC6909Claims.sol":{"keccak256":"0xa586f345739e52b0488a0fe40b6e375cce67fdd25758408b0efcb5133ad96a48","urls":["bzz-raw://e8c557b7e52abdbbd82e415a1acc27921446a7fd090b7d4877e52be72619547f","dweb:/ipfs/QmXE2KNPbXmGX8BQF3ei6zhzRTnhoTQg39XmqMnkhbr6QK"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/libraries/CustomRevert.sol":{"keccak256":"0x111ed3031b6990c80a93ae35dde6b6ac0b7e6af471388fdd7461e91edda9b7de","urls":["bzz-raw://c9ea883c98d6ae1829160d0977bb5195761cfd5bc81692d0a941f45717f594cd","dweb:/ipfs/QmZPwxzaeMNv536wzrAMrMswu7vMHuqPVpjcqL3YvCMoxt"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/libraries/SafeCast.sol":{"keccak256":"0x42c4a24f996a14d358be397b71f7ec9d7daf666aaec78002c63315a6ee67aa86","urls":["bzz-raw://c3db86e2ba3679105fc32edec656c70282e1fede6cab11217702443f6c26fa59","dweb:/ipfs/QmX4yaaSPdKQzYNRsezjTvZKsubzS8JRTEGFD3fPpTTCcj"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/types/BalanceDelta.sol":{"keccak256":"0xa719c8fe51e0a9524280178f19f6851bcc3b3b60e73618f3d60905d35ae5569f","urls":["bzz-raw://7436928dc9de35c6c7c5c636cb51adaf295cfd590da83b19a004ae33cbec9ef9","dweb:/ipfs/QmRJ9yZkUpzk4433GX3LgVVL8jwpbSYSUwXcucKisf3v4H"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/types/BeforeSwapDelta.sol":{"keccak256":"0x2a774312d91285313d569da1a718c909655da5432310417692097a1d4dc83a78","urls":["bzz-raw://a2c7a0379955cff9c17ab9e61f95e42909aa5947c22740f86ce940d09856f782","dweb:/ipfs/QmaAuo8UBYXsGrVuKh8iRoAAdqwtg1jDq515cW1ZRP5m9K"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/types/Currency.sol":{"keccak256":"0x4a0b84b282577ff6f8acf13ec9f4d32dbb9348748b49611d00e68bee96609c93","urls":["bzz-raw://45f9d62ab3d51b52957279e353853ba1547c3182c9a1e3d1846ada4a90263b01","dweb:/ipfs/QmS8NG84ccQS1yXVD8cv3eKX7J1UKxuJhbUfHTQR2opKF5"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/types/PoolId.sol":{"keccak256":"0x308311916ea0f5c2fd878b6a2751eb223d170a69e33f601fae56dfe3c5d392af","urls":["bzz-raw://669c2cd7ac17690b5d8831e0bda72822376c3a04b36afed6d31df4d75fe60918","dweb:/ipfs/QmT6EpkxqU8VF3WsgrZ66F3s1cCQRffR95z1HDYZz7ph6y"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/types/PoolKey.sol":{"keccak256":"0xf89856e0580d7a4856d3187a76858377ccee9d59702d230c338d84388221b786","urls":["bzz-raw://6f3118fa189025695c37fdf0bdd1190f085ad097484d3c88cf4c56d1db65f639","dweb:/ipfs/QmamXpgtB8GV1CaFLvqefPWSoikLDhMk1yU4heBnVzU8gi"],"license":"MIT"},"node_modules/@uniswap/v4-core/src/types/PoolOperation.sol":{"keccak256":"0x7a1a107fc1f2208abb2c9364c8c54e56e98dca27673e9441bed2b949b6382162","urls":["bzz-raw://4ad2470383bc5595d5af17840c64971f457adac68895a4db41ba5c71a4478e07","dweb:/ipfs/QmdwKhBHDZFuqXrR2BfDBD9r7rB2ULGQBznsajRTkTmL4c"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[{"astId":104,"contract":"contracts/Optaiko.sol:Optaiko","label":"poolManager","offset":0,"slot":"0","type":"t_contract(IPoolManager)2752"},{"astId":107,"contract":"contracts/Optaiko.sol:Optaiko","label":"_positionIdCounter","offset":20,"slot":"0","type":"t_uint64"},{"astId":113,"contract":"contracts/Optaiko.sol:Optaiko","label":"_positions","offset":0,"slot":"1","type":"t_mapping(t_uint256,t_struct(OptionPosition)24_storage)"},{"astId":118,"contract":"contracts/Optaiko.sol:Optaiko","label":"accruedPremia","offset":0,"slot":"2","type":"t_mapping(t_uint256,t_uint256)"},{"astId":123,"contract":"contracts/Optaiko.sol:Optaiko","label":"lastUpdateTimestamp","offset":0,"slot":"3","type":"t_mapping(t_uint256,t_uint256)"},{"astId":127,"contract":"contracts/Optaiko.sol:Optaiko","label":"__gap","offset":0,"slot":"4","type":"t_array(t_uint256)46_storage"}],"types":{"t_address":{"encoding":"inplace","label":"address","numberOfBytes":"20"},"t_array(t_struct(Leg)12_storage)dyn_storage":{"encoding":"dynamic_array","label":"struct IOptaiko.Leg[]","numberOfBytes":"32","base":"t_struct(Leg)12_storage"},"t_array(t_uint256)46_storage":{"encoding":"inplace","label":"uint256[46]","numberOfBytes":"1472","base":"t_uint256"},"t_bool":{"encoding":"inplace","label":"bool","numberOfBytes":"1"},"t_bytes32":{"encoding":"inplace","label":"bytes32","numberOfBytes":"32"},"t_contract(IPoolManager)2752":{"encoding":"inplace","label":"contract IPoolManager","numberOfBytes":"20"},"t_int24":{"encoding":"inplace","label":"int24","numberOfBytes":"3"},"t_mapping(t_uint256,t_struct(OptionPosition)24_storage)":{"encoding":"mapping","key":"t_uint256","label":"mapping(uint256 => struct IOptaiko.OptionPosition)","numberOfBytes":"32","value":"t_struct(OptionPosition)24_storage"},"t_mapping(t_uint256,t_uint256)":{"encoding":"mapping","key":"t_uint256","label":"mapping(uint256 => uint256)","numberOfBytes":"32","value":"t_uint256"},"t_struct(Leg)12_storage":{"encoding":"inplace","label":"struct IOptaiko.Leg","numberOfBytes":"32","members":[{"astId":5,"contract":"contracts/Optaiko.sol:Optaiko","label":"isLong","offset":0,"slot":"0","type":"t_bool"},{"astId":7,"contract":"contracts/Optaiko.sol:Optaiko","label":"tickLower","offset":1,"slot":"0","type":"t_int24"},{"astId":9,"contract":"contracts/Optaiko.sol:Optaiko","label":"tickUpper","offset":4,"slot":"0","type":"t_int24"},{"astId":11,"contract":"contracts/Optaiko.sol:Optaiko","label":"liquidity","offset":7,"slot":"0","type":"t_uint128"}]},"t_struct(OptionPosition)24_storage":{"encoding":"inplace","label":"struct IOptaiko.OptionPosition","numberOfBytes":"128","members":[{"astId":15,"contract":"contracts/Optaiko.sol:Optaiko","label":"owner","offset":0,"slot":"0","type":"t_address"},{"astId":17,"contract":"contracts/Optaiko.sol:Optaiko","label":"poolId","offset":0,"slot":"1","type":"t_bytes32"},{"astId":21,"contract":"contracts/Optaiko.sol:Optaiko","label":"legs","offset":0,"slot":"2","type":"t_array(t_struct(Leg)12_storage)dyn_storage"},{"astId":23,"contract":"contracts/Optaiko.sol:Optaiko","label":"openedAt","offset":0,"slot":"3","type":"t_uint256"}]},"t_uint128":{"encoding":"inplace","label":"uint128","numberOfBytes":"16"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"},"t_uint64":{"encoding":"inplace","label":"uint64","numberOfBytes":"8"}}},"ast":{"absolutePath":"contracts/Optaiko.sol","id":511,"exportedSymbols":{"IOptaiko":[70],"IPoolManager":[2752],"Optaiko":[510],"Ownable2StepUpgradeable":[649],"PoolIdLibrary":[3831],"PoolKey":[3863],"ReentrancyGuardUpgradeable":[1455],"UUPSUpgradeable":[1280]},"nodeType":"SourceUnit","src":"32:13025:1","nodes":[{"id":72,"nodeType":"PragmaDirective","src":"32:24:1","nodes":[],"literals":["solidity","^","0.8",".26"]},{"id":74,"nodeType":"ImportDirective","src":"58:100:1","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol","file":"@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":1281,"symbolAliases":[{"foreign":{"id":73,"name":"UUPSUpgradeable","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1280,"src":"66:15:1","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":76,"nodeType":"ImportDirective","src":"159:111:1","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts-upgradeable/access/Ownable2StepUpgradeable.sol","file":"@openzeppelin/contracts-upgradeable/access/Ownable2StepUpgradeable.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":650,"symbolAliases":[{"foreign":{"id":75,"name":"Ownable2StepUpgradeable","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":649,"src":"167:23:1","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":78,"nodeType":"ImportDirective","src":"271:120:1","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol","file":"@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":1456,"symbolAliases":[{"foreign":{"id":77,"name":"ReentrancyGuardUpgradeable","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1455,"src":"279:26:1","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":80,"nodeType":"ImportDirective","src":"392:40:1","nodes":[],"absolutePath":"contracts/IOptaiko.sol","file":"./IOptaiko.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":71,"symbolAliases":[{"foreign":{"id":79,"name":"IOptaiko","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":70,"src":"400:8:1","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":82,"nodeType":"ImportDirective","src":"433:74:1","nodes":[],"absolutePath":"node_modules/@uniswap/v4-core/src/interfaces/IPoolManager.sol","file":"@uniswap/v4-core/interfaces/IPoolManager.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":2753,"symbolAliases":[{"foreign":{"id":81,"name":"IPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2752,"src":"441:12:1","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":84,"nodeType":"ImportDirective","src":"508:59:1","nodes":[],"absolutePath":"node_modules/@uniswap/v4-core/src/types/PoolKey.sol","file":"@uniswap/v4-core/types/PoolKey.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":3864,"symbolAliases":[{"foreign":{"id":83,"name":"PoolKey","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3863,"src":"516:7:1","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":86,"nodeType":"ImportDirective","src":"568:64:1","nodes":[],"absolutePath":"node_modules/@uniswap/v4-core/src/types/PoolId.sol","file":"@uniswap/v4-core/types/PoolId.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":3832,"symbolAliases":[{"foreign":{"id":85,"name":"PoolIdLibrary","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":3831,"src":"576:13:1","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":87,"nodeType":"ImportDirective","src":"633:30:1","nodes":[],"absolutePath":"contracts/Optaiko_Layout.sol","file":"./Optaiko_Layout.sol","nameLocation":"-1:-1:-1","scope":511,"sourceUnit":513,"symbolAliases":[],"unitAlias":""},{"id":510,"nodeType":"ContractDefinition","src":"2282:10774:1","nodes":[{"id":100,"nodeType":"UsingForDirective","src":"2387:32:1","nodes":[],"global":false,"libraryName":{"id":97,"name":"PoolIdLibrary","nameLocations":["2393:13:1"],"nodeType":"IdentifierPath","referencedDeclaration":3831,"src":"2393:13:1"},"typeName":{"id":99,"nodeType":"UserDefinedTypeName","pathNode":{"id":98,"name":"PoolKey","nameLocations":["2411:7:1"],"nodeType":"IdentifierPath","referencedDeclaration":3863,"src":"2411:7:1"},"referencedDeclaration":3863,"src":"2411:7:1","typeDescriptions":{"typeIdentifier":"t_struct$_PoolKey_$3863_storage_ptr","typeString":"struct PoolKey"}}},{"id":104,"nodeType":"VariableDeclaration","src":"2709:31:1","nodes":[],"constant":false,"documentation":{"id":101,"nodeType":"StructuredDocumentation","src":"2583:121:1","text":"@notice The Uniswap V4 Pool Manager contract\n @dev This is the core Uniswap V4 contract that manages all pools"},"functionSelector":"dc4c90d3","mutability":"mutable","name":"poolManager","nameLocation":"2729:11:1","scope":510,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"},"typeName":{"id":103,"nodeType":"UserDefinedTypeName","pathNode":{"id":102,"name":"IPoolManager","nameLocations":["2709:12:1"],"nodeType":"IdentifierPath","referencedDeclaration":2752,"src":"2709:12:1"},"referencedDeclaration":2752,"src":"2709:12:1","typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}},"visibility":"public"},{"id":107,"nodeType":"VariableDeclaration","src":"2915:33:1","nodes":[],"constant":false,"documentation":{"id":105,"nodeType":"StructuredDocumentation","src":"2747:163:1","text":"@notice Counter for generating unique position IDs\n @dev Packed with poolManager in the same storage slot (address 160 bits + uint64 64 bits = 224 bits)"},"mutability":"mutable","name":"_positionIdCounter","nameLocation":"2930:18:1","scope":510,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":106,"name":"uint64","nodeType":"ElementaryTypeName","src":"2915:6:1","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"private"},{"id":113,"nodeType":"VariableDeclaration","src":"3076:62:1","nodes":[],"constant":false,"documentation":{"id":108,"nodeType":"StructuredDocumentation","src":"2955:116:1","text":"@notice Mapping from position ID to position data\n @dev Position IDs are auto-incremented starting from 1"},"mutability":"mutable","name":"_positions","nameLocation":"3128:10:1","scope":510,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_OptionPosition_$24_storage_$","typeString":"mapping(uint256 => struct IOptaiko.OptionPosition)"},"typeName":{"id":112,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":109,"name":"uint256","nodeType":"ElementaryTypeName","src":"3084:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Mapping","src":"3076:43:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_OptionPosition_$24_storage_$","typeString":"mapping(uint256 => struct IOptaiko.OptionPosition)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":111,"nodeType":"UserDefinedTypeName","pathNode":{"id":110,"name":"IOptaiko.OptionPosition","nameLocations":["3095:8:1","3104:14:1"],"nodeType":"IdentifierPath","referencedDeclaration":24,"src":"3095:23:1"},"referencedDeclaration":24,"src":"3095:23:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition"}}},"visibility":"private"},{"id":118,"nodeType":"VariableDeclaration","src":"3275:48:1","nodes":[],"constant":false,"documentation":{"id":114,"nodeType":"StructuredDocumentation","src":"3145:125:1","text":"@notice Mapping to track accrued premia for each position\n @dev Premia is tracked in the base currency of the pool"},"functionSelector":"882ea4e1","mutability":"mutable","name":"accruedPremia","nameLocation":"3310:13:1","scope":510,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"},"typeName":{"id":117,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":115,"name":"uint256","nodeType":"ElementaryTypeName","src":"3283:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Mapping","src":"3275:27:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":116,"name":"uint256","nodeType":"ElementaryTypeName","src":"3294:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},"visibility":"public"},{"id":123,"nodeType":"VariableDeclaration","src":"3407:54:1","nodes":[],"constant":false,"documentation":{"id":119,"nodeType":"StructuredDocumentation","src":"3330:72:1","text":"@notice Mapping to track the last update timestamp for each position"},"functionSelector":"2ffe186c","mutability":"mutable","name":"lastUpdateTimestamp","nameLocation":"3442:19:1","scope":510,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"},"typeName":{"id":122,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":120,"name":"uint256","nodeType":"ElementaryTypeName","src":"3415:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Mapping","src":"3407:27:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":121,"name":"uint256","nodeType":"ElementaryTypeName","src":"3426:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},"visibility":"public"},{"id":127,"nodeType":"VariableDeclaration","src":"3468:25:1","nodes":[],"constant":false,"mutability":"mutable","name":"__gap","nameLocation":"3488:5:1","scope":510,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$46_storage","typeString":"uint256[46]"},"typeName":{"baseType":{"id":124,"name":"uint256","nodeType":"ElementaryTypeName","src":"3468:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":126,"length":{"hexValue":"3436","id":125,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3476:2:1","typeDescriptions":{"typeIdentifier":"t_rational_46_by_1","typeString":"int_const 46"},"value":"46"},"nodeType":"ArrayTypeName","src":"3468:11:1","typeDescriptions":{"typeIdentifier":"t_array$_t_uint256_$46_storage_ptr","typeString":"uint256[46]"}},"visibility":"private"},{"id":134,"nodeType":"EventDefinition","src":"3714:81:1","nodes":[],"anonymous":false,"documentation":{"id":128,"nodeType":"StructuredDocumentation","src":"3657:52:1","text":"@notice Emitted when the Pool Manager is updated"},"eventSelector":"98ea7e41f981415a7f25f05c01f54351c0524b978d01a0446d0ff3bb92840fb7","name":"PoolManagerUpdated","nameLocation":"3720:18:1","parameters":{"id":133,"nodeType":"ParameterList","parameters":[{"constant":false,"id":130,"indexed":true,"mutability":"mutable","name":"oldManager","nameLocation":"3755:10:1","nodeType":"VariableDeclaration","scope":134,"src":"3739:26:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":129,"name":"address","nodeType":"ElementaryTypeName","src":"3739:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":132,"indexed":true,"mutability":"mutable","name":"newManager","nameLocation":"3783:10:1","nodeType":"VariableDeclaration","scope":134,"src":"3767:26:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":131,"name":"address","nodeType":"ElementaryTypeName","src":"3767:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"3738:56:1"}},{"id":172,"nodeType":"FunctionDefinition","src":"4212:305:1","nodes":[],"body":{"id":171,"nodeType":"Block","src":"4291:226:1","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":150,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":145,"name":"_poolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":137,"src":"4309:12:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":148,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4333:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":147,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4325:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":146,"name":"address","nodeType":"ElementaryTypeName","src":"4325:7:1","typeDescriptions":{}}},"id":149,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4325:10:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4309:26:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":151,"name":"InvalidPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":499,"src":"4337:18:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":152,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4337:20:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":144,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"4301:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":153,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4301:57:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":154,"nodeType":"ExpressionStatement","src":"4301:57:1"},{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":155,"name":"__UUPSUpgradeable_init","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1152,"src":"4369:22:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":156,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4369:24:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":157,"nodeType":"ExpressionStatement","src":"4369:24:1"},{"expression":{"arguments":[{"id":159,"name":"_owner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":139,"src":"4418:6:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":158,"name":"__Ownable_init","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":704,"src":"4403:14:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$returns$__$","typeString":"function (address)"}},"id":160,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4403:22:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":161,"nodeType":"ExpressionStatement","src":"4403:22:1"},{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":162,"name":"__ReentrancyGuard_init","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1366,"src":"4435:22:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":163,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4435:24:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":164,"nodeType":"ExpressionStatement","src":"4435:24:1"},{"expression":{"id":169,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":165,"name":"poolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":104,"src":"4470:11:1","typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":167,"name":"_poolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":137,"src":"4497:12:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":166,"name":"IPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2752,"src":"4484:12:1","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IPoolManager_$2752_$","typeString":"type(contract IPoolManager)"}},"id":168,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4484:26:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}},"src":"4470:40:1","typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}},"id":170,"nodeType":"ExpressionStatement","src":"4470:40:1"}]},"documentation":{"id":135,"nodeType":"StructuredDocumentation","src":"3966:241:1","text":"@notice Initializes the contract\n @dev This function replaces the constructor for upgradeable contracts\n @param _poolManager The address of the Uniswap V4 Pool Manager\n @param _owner The address of the contract owner"},"functionSelector":"485cc955","implemented":true,"kind":"function","modifiers":[{"id":142,"kind":"modifierInvocation","modifierName":{"id":141,"name":"initializer","nameLocations":["4279:11:1"],"nodeType":"IdentifierPath","referencedDeclaration":952,"src":"4279:11:1"},"nodeType":"ModifierInvocation","src":"4279:11:1"}],"name":"initialize","nameLocation":"4221:10:1","parameters":{"id":140,"nodeType":"ParameterList","parameters":[{"constant":false,"id":137,"mutability":"mutable","name":"_poolManager","nameLocation":"4240:12:1","nodeType":"VariableDeclaration","scope":172,"src":"4232:20:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":136,"name":"address","nodeType":"ElementaryTypeName","src":"4232:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":139,"mutability":"mutable","name":"_owner","nameLocation":"4262:6:1","nodeType":"VariableDeclaration","scope":172,"src":"4254:14:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":138,"name":"address","nodeType":"ElementaryTypeName","src":"4254:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"4231:38:1"},"returnParameters":{"id":143,"nodeType":"ParameterList","parameters":[],"src":"4291:0:1"},"scope":510,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":274,"nodeType":"FunctionDefinition","src":"5566:1484:1","nodes":[],"body":{"id":273,"nodeType":"Block","src":"5728:1322:1","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":191,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":188,"name":"legs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":179,"src":"5773:4:1","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_Leg_$12_calldata_ptr_$dyn_calldata_ptr","typeString":"struct IOptaiko.Leg calldata[] calldata"}},"id":189,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5778:6:1","memberName":"length","nodeType":"MemberAccess","src":"5773:11:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":190,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5787:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5773:15:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":192,"name":"ZeroLiquidity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":509,"src":"5790:13:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":193,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5790:15:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":187,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"5765:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":194,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5765:41:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":195,"nodeType":"ExpressionStatement","src":"5765:41:1"},{"expression":{"id":199,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":196,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":185,"src":"5853:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":198,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"5866:20:1","subExpression":{"id":197,"name":"_positionIdCounter","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":107,"src":"5868:18:1","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"src":"5853:33:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":200,"nodeType":"ExpressionStatement","src":"5853:33:1"},{"assignments":[205],"declarations":[{"constant":false,"id":205,"mutability":"mutable","name":"position","nameLocation":"5968:8:1","nodeType":"VariableDeclaration","scope":273,"src":"5936:40:1","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition"},"typeName":{"id":204,"nodeType":"UserDefinedTypeName","pathNode":{"id":203,"name":"IOptaiko.OptionPosition","nameLocations":["5936:8:1","5945:14:1"],"nodeType":"IdentifierPath","referencedDeclaration":24,"src":"5936:23:1"},"referencedDeclaration":24,"src":"5936:23:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition"}},"visibility":"internal"}],"id":209,"initialValue":{"baseExpression":{"id":206,"name":"_positions","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":113,"src":"5979:10:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_OptionPosition_$24_storage_$","typeString":"mapping(uint256 => struct IOptaiko.OptionPosition storage ref)"}},"id":208,"indexExpression":{"id":207,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":185,"src":"5990:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5979:22:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage","typeString":"struct IOptaiko.OptionPosition storage ref"}},"nodeType":"VariableDeclarationStatement","src":"5936:65:1"},{"expression":{"id":215,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":210,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":205,"src":"6011:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition storage pointer"}},"id":212,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6020:5:1","memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":15,"src":"6011:14:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":213,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"6028:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":214,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6032:6:1","memberName":"sender","nodeType":"MemberAccess","src":"6028:10:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"6011:27:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":216,"nodeType":"ExpressionStatement","src":"6011:27:1"},{"expression":{"id":221,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":217,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":205,"src":"6048:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition storage pointer"}},"id":219,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6057:6:1","memberName":"poolId","nodeType":"MemberAccess","referencedDeclaration":17,"src":"6048:15:1","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":220,"name":"poolId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":175,"src":"6066:6:1","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"6048:24:1","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":222,"nodeType":"ExpressionStatement","src":"6048:24:1"},{"expression":{"id":228,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":223,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":205,"src":"6082:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition storage pointer"}},"id":225,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"6091:8:1","memberName":"openedAt","nodeType":"MemberAccess","referencedDeclaration":23,"src":"6082:17:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":226,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"6102:5:1","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":227,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6108:9:1","memberName":"timestamp","nodeType":"MemberAccess","src":"6102:15:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6082:35:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":229,"nodeType":"ExpressionStatement","src":"6082:35:1"},{"body":{"id":257,"nodeType":"Block","src":"6610:275:1","statements":[{"expression":{"arguments":[{"baseExpression":{"id":241,"name":"legs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":179,"src":"6791:4:1","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_Leg_$12_calldata_ptr_$dyn_calldata_ptr","typeString":"struct IOptaiko.Leg calldata[] calldata"}},"id":243,"indexExpression":{"id":242,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":231,"src":"6796:1:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6791:7:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_calldata_ptr","typeString":"struct IOptaiko.Leg calldata"}},{"hexValue":"3630","id":244,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6800:2:1","typeDescriptions":{"typeIdentifier":"t_rational_60_by_1","typeString":"int_const 60"},"value":"60"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_Leg_$12_calldata_ptr","typeString":"struct IOptaiko.Leg calldata"},{"typeIdentifier":"t_rational_60_by_1","typeString":"int_const 60"}],"id":240,"name":"_validateLeg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":447,"src":"6778:12:1","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_struct$_Leg_$12_memory_ptr_$_t_int24_$returns$__$","typeString":"function (struct IOptaiko.Leg memory,int24) pure"}},"id":245,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6778:25:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":246,"nodeType":"ExpressionStatement","src":"6778:25:1"},{"expression":{"arguments":[{"baseExpression":{"id":252,"name":"legs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":179,"src":"6866:4:1","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_Leg_$12_calldata_ptr_$dyn_calldata_ptr","typeString":"struct IOptaiko.Leg calldata[] calldata"}},"id":254,"indexExpression":{"id":253,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":231,"src":"6871:1:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"6866:7:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_calldata_ptr","typeString":"struct IOptaiko.Leg calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_Leg_$12_calldata_ptr","typeString":"struct IOptaiko.Leg calldata"}],"expression":{"expression":{"id":247,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":205,"src":"6847:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition storage pointer"}},"id":250,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"6856:4:1","memberName":"legs","nodeType":"MemberAccess","referencedDeclaration":21,"src":"6847:13:1","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_Leg_$12_storage_$dyn_storage","typeString":"struct IOptaiko.Leg storage ref[] storage ref"}},"id":251,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6861:4:1","memberName":"push","nodeType":"MemberAccess","src":"6847:18:1","typeDescriptions":{"typeIdentifier":"t_function_arraypush_nonpayable$_t_array$_t_struct$_Leg_$12_storage_$dyn_storage_ptr_$_t_struct$_Leg_$12_storage_$returns$__$attached_to$_t_array$_t_struct$_Leg_$12_storage_$dyn_storage_ptr_$","typeString":"function (struct IOptaiko.Leg storage ref[] storage pointer,struct IOptaiko.Leg storage ref)"}},"id":255,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6847:27:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":256,"nodeType":"ExpressionStatement","src":"6847:27:1"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":236,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":233,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":231,"src":"6588:1:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":234,"name":"legs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":179,"src":"6592:4:1","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_Leg_$12_calldata_ptr_$dyn_calldata_ptr","typeString":"struct IOptaiko.Leg calldata[] calldata"}},"id":235,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6597:6:1","memberName":"length","nodeType":"MemberAccess","src":"6592:11:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6588:15:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":258,"initializationExpression":{"assignments":[231],"declarations":[{"constant":false,"id":231,"mutability":"mutable","name":"i","nameLocation":"6585:1:1","nodeType":"VariableDeclaration","scope":258,"src":"6577:9:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":230,"name":"uint256","nodeType":"ElementaryTypeName","src":"6577:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":232,"nodeType":"VariableDeclarationStatement","src":"6577:9:1"},"isSimpleCounterLoop":true,"loopExpression":{"expression":{"id":238,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"6605:3:1","subExpression":{"id":237,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":231,"src":"6607:1:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":239,"nodeType":"ExpressionStatement","src":"6605:3:1"},"nodeType":"ForStatement","src":"6572:313:1"},{"expression":{"id":264,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":259,"name":"lastUpdateTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":123,"src":"6934:19:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":261,"indexExpression":{"id":260,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":185,"src":"6954:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"6934:31:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":262,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"6968:5:1","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":263,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6974:9:1","memberName":"timestamp","nodeType":"MemberAccess","src":"6968:15:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6934:49:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":265,"nodeType":"ExpressionStatement","src":"6934:49:1"},{"eventCall":{"arguments":[{"id":267,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":185,"src":"7012:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":268,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"7024:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":269,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7028:6:1","memberName":"sender","nodeType":"MemberAccess","src":"7024:10:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":270,"name":"poolId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":175,"src":"7036:6:1","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":266,"name":"OptionMinted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":33,"src":"6999:12:1","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$_t_address_$_t_bytes32_$returns$__$","typeString":"function (uint256,address,bytes32)"}},"id":271,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6999:44:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":272,"nodeType":"EmitStatement","src":"6994:49:1"}]},"baseFunctions":[54],"documentation":{"id":173,"nodeType":"StructuredDocumentation","src":"4692:869:1","text":"@notice Mints a new option position\n @dev This function creates a new multi-leg option position. Each leg can be either:\n - A short leg (isLong = false): Deposits liquidity to the Uniswap V4 pool\n - A long leg (isLong = true): Conceptually borrows liquidity (tracked internally)\n **Important Notes:**\n - The caller must approve this contract to spend the required tokens before calling this function\n - All legs in a position share the same poolId\n - Tick ranges must align with the pool's tick spacing\n - For short legs, this contract will interact with the Uniswap V4 PoolManager to add liquidity\n @param poolId The Uniswap V4 Pool ID (derived from PoolKey)\n @param legs Array of legs defining the option strategy\n @return positionId The ID of the newly created position"},"functionSelector":"06d07423","implemented":true,"kind":"function","modifiers":[{"id":183,"kind":"modifierInvocation","modifierName":{"id":182,"name":"nonReentrant","nameLocations":["5674:12:1"],"nodeType":"IdentifierPath","referencedDeclaration":1395,"src":"5674:12:1"},"nodeType":"ModifierInvocation","src":"5674:12:1"}],"name":"mintOption","nameLocation":"5575:10:1","overrides":{"id":181,"nodeType":"OverrideSpecifier","overrides":[],"src":"5657:8:1"},"parameters":{"id":180,"nodeType":"ParameterList","parameters":[{"constant":false,"id":175,"mutability":"mutable","name":"poolId","nameLocation":"5594:6:1","nodeType":"VariableDeclaration","scope":274,"src":"5586:14:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":174,"name":"bytes32","nodeType":"ElementaryTypeName","src":"5586:7:1","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":179,"mutability":"mutable","name":"legs","nameLocation":"5626:4:1","nodeType":"VariableDeclaration","scope":274,"src":"5602:28:1","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_Leg_$12_calldata_ptr_$dyn_calldata_ptr","typeString":"struct IOptaiko.Leg[]"},"typeName":{"baseType":{"id":177,"nodeType":"UserDefinedTypeName","pathNode":{"id":176,"name":"IOptaiko.Leg","nameLocations":["5602:8:1","5611:3:1"],"nodeType":"IdentifierPath","referencedDeclaration":12,"src":"5602:12:1"},"referencedDeclaration":12,"src":"5602:12:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_storage_ptr","typeString":"struct IOptaiko.Leg"}},"id":178,"nodeType":"ArrayTypeName","src":"5602:14:1","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_Leg_$12_storage_$dyn_storage_ptr","typeString":"struct IOptaiko.Leg[]"}},"visibility":"internal"}],"src":"5585:46:1"},"returnParameters":{"id":186,"nodeType":"ParameterList","parameters":[{"constant":false,"id":185,"mutability":"mutable","name":"positionId","nameLocation":"5712:10:1","nodeType":"VariableDeclaration","scope":274,"src":"5704:18:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":184,"name":"uint256","nodeType":"ElementaryTypeName","src":"5704:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5703:20:1"},"scope":510,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":343,"nodeType":"FunctionDefinition","src":"7801:1015:1","nodes":[],"body":{"id":342,"nodeType":"Block","src":"7872:944:1","nodes":[],"statements":[{"assignments":[287],"declarations":[{"constant":false,"id":287,"mutability":"mutable","name":"position","nameLocation":"7914:8:1","nodeType":"VariableDeclaration","scope":342,"src":"7882:40:1","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition"},"typeName":{"id":286,"nodeType":"UserDefinedTypeName","pathNode":{"id":285,"name":"IOptaiko.OptionPosition","nameLocations":["7882:8:1","7891:14:1"],"nodeType":"IdentifierPath","referencedDeclaration":24,"src":"7882:23:1"},"referencedDeclaration":24,"src":"7882:23:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition"}},"visibility":"internal"}],"id":291,"initialValue":{"baseExpression":{"id":288,"name":"_positions","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":113,"src":"7925:10:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_OptionPosition_$24_storage_$","typeString":"mapping(uint256 => struct IOptaiko.OptionPosition storage ref)"}},"id":290,"indexExpression":{"id":289,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":277,"src":"7936:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"7925:22:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage","typeString":"struct IOptaiko.OptionPosition storage ref"}},"nodeType":"VariableDeclarationStatement","src":"7882:65:1"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":297,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":293,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":287,"src":"7994:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition storage pointer"}},"id":294,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"8003:5:1","memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":15,"src":"7994:14:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":295,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"8012:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":296,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8016:6:1","memberName":"sender","nodeType":"MemberAccess","src":"8012:10:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"7994:28:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":298,"name":"Unauthorized","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":507,"src":"8024:12:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":299,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8024:14:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":292,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"7986:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":300,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7986:53:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":301,"nodeType":"ExpressionStatement","src":"7986:53:1"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":309,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":303,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":287,"src":"8057:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition storage pointer"}},"id":304,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"8066:5:1","memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":15,"src":"8057:14:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":307,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8083:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":306,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"8075:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":305,"name":"address","nodeType":"ElementaryTypeName","src":"8075:7:1","typeDescriptions":{}}},"id":308,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8075:10:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"8057:28:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":310,"name":"PositionDoesNotExist","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":505,"src":"8087:20:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":311,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8087:22:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":302,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"8049:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":312,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8049:61:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":313,"nodeType":"ExpressionStatement","src":"8049:61:1"},{"assignments":[315],"declarations":[{"constant":false,"id":315,"mutability":"mutable","name":"settledPremium","nameLocation":"8168:14:1","nodeType":"VariableDeclaration","scope":342,"src":"8160:22:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":314,"name":"uint256","nodeType":"ElementaryTypeName","src":"8160:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":319,"initialValue":{"arguments":[{"id":317,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":277,"src":"8199:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":316,"name":"_settlePremia","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":396,"src":"8185:13:1","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) returns (uint256)"}},"id":318,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8185:25:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8160:50:1"},{"expression":{"id":323,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"delete","prefix":true,"src":"8622:29:1","subExpression":{"baseExpression":{"id":320,"name":"_positions","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":113,"src":"8629:10:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_OptionPosition_$24_storage_$","typeString":"mapping(uint256 => struct IOptaiko.OptionPosition storage ref)"}},"id":322,"indexExpression":{"id":321,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":277,"src":"8640:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"8629:22:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage","typeString":"struct IOptaiko.OptionPosition storage ref"}},"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":324,"nodeType":"ExpressionStatement","src":"8622:29:1"},{"expression":{"id":328,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"delete","prefix":true,"src":"8661:32:1","subExpression":{"baseExpression":{"id":325,"name":"accruedPremia","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":118,"src":"8668:13:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":327,"indexExpression":{"id":326,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":277,"src":"8682:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"8668:25:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":329,"nodeType":"ExpressionStatement","src":"8661:32:1"},{"expression":{"id":333,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"delete","prefix":true,"src":"8703:38:1","subExpression":{"baseExpression":{"id":330,"name":"lastUpdateTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":123,"src":"8710:19:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":332,"indexExpression":{"id":331,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":277,"src":"8730:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"8710:31:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":334,"nodeType":"ExpressionStatement","src":"8703:38:1"},{"eventCall":{"arguments":[{"id":336,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":277,"src":"8770:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":337,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"8782:3:1","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":338,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8786:6:1","memberName":"sender","nodeType":"MemberAccess","src":"8782:10:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":339,"name":"settledPremium","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":315,"src":"8794:14:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":335,"name":"OptionBurned","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42,"src":"8757:12:1","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$_t_address_$_t_uint256_$returns$__$","typeString":"function (uint256,address,uint256)"}},"id":340,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8757:52:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":341,"nodeType":"EmitStatement","src":"8752:57:1"}]},"baseFunctions":[60],"documentation":{"id":275,"nodeType":"StructuredDocumentation","src":"7056:740:1","text":"@notice Burns (closes) an existing option position\n @dev This function closes a position and settles all outstanding premia. The process involves:\n 1. Verifying the caller owns the position\n 2. Calculating and settling any accrued premia\n 3. For short legs: Removing liquidity from the Uniswap V4 pool\n 4. For long legs: Settling the internal accounting\n 5. Transferring tokens back to the user\n **Important Notes:**\n - Only the position owner can burn their position\n - Premium settlement occurs automatically during the burn\n - The position is deleted from storage after burning to save gas\n @param positionId The ID of the position to close"},"functionSelector":"81ae634d","implemented":true,"kind":"function","modifiers":[{"id":281,"kind":"modifierInvocation","modifierName":{"id":280,"name":"nonReentrant","nameLocations":["7859:12:1"],"nodeType":"IdentifierPath","referencedDeclaration":1395,"src":"7859:12:1"},"nodeType":"ModifierInvocation","src":"7859:12:1"}],"name":"burnOption","nameLocation":"7810:10:1","overrides":{"id":279,"nodeType":"OverrideSpecifier","overrides":[],"src":"7850:8:1"},"parameters":{"id":278,"nodeType":"ParameterList","parameters":[{"constant":false,"id":277,"mutability":"mutable","name":"positionId","nameLocation":"7829:10:1","nodeType":"VariableDeclaration","scope":343,"src":"7821:18:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":276,"name":"uint256","nodeType":"ElementaryTypeName","src":"7821:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7820:20:1"},"returnParameters":{"id":282,"nodeType":"ParameterList","parameters":[],"src":"7872:0:1"},"scope":510,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":372,"nodeType":"FunctionDefinition","src":"9080:271:1","nodes":[],"body":{"id":371,"nodeType":"Block","src":"9230:121:1","nodes":[],"statements":[{"expression":{"id":357,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":353,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":351,"src":"9240:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_memory_ptr","typeString":"struct IOptaiko.OptionPosition memory"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"baseExpression":{"id":354,"name":"_positions","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":113,"src":"9251:10:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_OptionPosition_$24_storage_$","typeString":"mapping(uint256 => struct IOptaiko.OptionPosition storage ref)"}},"id":356,"indexExpression":{"id":355,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":346,"src":"9262:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"9251:22:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage","typeString":"struct IOptaiko.OptionPosition storage ref"}},"src":"9240:33:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_memory_ptr","typeString":"struct IOptaiko.OptionPosition memory"}},"id":358,"nodeType":"ExpressionStatement","src":"9240:33:1"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":366,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":360,"name":"position","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":351,"src":"9291:8:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_memory_ptr","typeString":"struct IOptaiko.OptionPosition memory"}},"id":361,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"9300:5:1","memberName":"owner","nodeType":"MemberAccess","referencedDeclaration":15,"src":"9291:14:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":364,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9317:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":363,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9309:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":362,"name":"address","nodeType":"ElementaryTypeName","src":"9309:7:1","typeDescriptions":{}}},"id":365,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9309:10:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"9291:28:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":367,"name":"PositionDoesNotExist","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":505,"src":"9321:20:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":368,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9321:22:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":359,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"9283:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":369,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9283:61:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":370,"nodeType":"ExpressionStatement","src":"9283:61:1"}]},"baseFunctions":[69],"documentation":{"id":344,"nodeType":"StructuredDocumentation","src":"8822:253:1","text":"@notice Returns the details of a position\n @dev Returns all information about a position including owner, pool, legs, and timestamps\n @param positionId The ID of the position to query\n @return position The complete position data"},"functionSelector":"eb02c301","implemented":true,"kind":"function","modifiers":[],"name":"getPosition","nameLocation":"9089:11:1","overrides":{"id":348,"nodeType":"OverrideSpecifier","overrides":[],"src":"9159:8:1"},"parameters":{"id":347,"nodeType":"ParameterList","parameters":[{"constant":false,"id":346,"mutability":"mutable","name":"positionId","nameLocation":"9109:10:1","nodeType":"VariableDeclaration","scope":372,"src":"9101:18:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":345,"name":"uint256","nodeType":"ElementaryTypeName","src":"9101:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9100:20:1"},"returnParameters":{"id":352,"nodeType":"ParameterList","parameters":[{"constant":false,"id":351,"mutability":"mutable","name":"position","nameLocation":"9216:8:1","nodeType":"VariableDeclaration","scope":372,"src":"9185:39:1","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_memory_ptr","typeString":"struct IOptaiko.OptionPosition"},"typeName":{"id":350,"nodeType":"UserDefinedTypeName","pathNode":{"id":349,"name":"IOptaiko.OptionPosition","nameLocations":["9185:8:1","9194:14:1"],"nodeType":"IdentifierPath","referencedDeclaration":24,"src":"9185:23:1"},"referencedDeclaration":24,"src":"9185:23:1","typeDescriptions":{"typeIdentifier":"t_struct$_OptionPosition_$24_storage_ptr","typeString":"struct IOptaiko.OptionPosition"}},"visibility":"internal"}],"src":"9184:41:1"},"scope":510,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":396,"nodeType":"FunctionDefinition","src":"10279:534:1","nodes":[],"body":{"id":395,"nodeType":"Block","src":"10363:450:1","nodes":[],"statements":[{"expression":{"id":384,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":380,"name":"settledAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":378,"src":"10646:13:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"baseExpression":{"id":381,"name":"accruedPremia","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":118,"src":"10662:13:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":383,"indexExpression":{"id":382,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":375,"src":"10676:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"10662:25:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10646:41:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":385,"nodeType":"ExpressionStatement","src":"10646:41:1"},{"expression":{"id":391,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":386,"name":"lastUpdateTimestamp","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":123,"src":"10726:19:1","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_uint256_$","typeString":"mapping(uint256 => uint256)"}},"id":388,"indexExpression":{"id":387,"name":"positionId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":375,"src":"10746:10:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"10726:31:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":389,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"10760:5:1","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":390,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10766:9:1","memberName":"timestamp","nodeType":"MemberAccess","src":"10760:15:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10726:49:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":392,"nodeType":"ExpressionStatement","src":"10726:49:1"},{"expression":{"id":393,"name":"settledAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":378,"src":"10793:13:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":379,"id":394,"nodeType":"Return","src":"10786:20:1"}]},"documentation":{"id":373,"nodeType":"StructuredDocumentation","src":"9526:748:1","text":"@notice Settles accrued premia for a position\n @dev This internal function calculates and settles streaming premia. The calculation is based on:\n - Time elapsed since last update\n - Fees collected from the underlying Uniswap V4 pool (for short positions)\n - Liquidity utilization (for long positions)\n In a full implementation, this would:\n 1. Query the Uniswap V4 PoolManager for accrued fees\n 2. Calculate the delta since the last settlement\n 3. Update internal accounting for long/short premia flows\n 4. Transfer any net premia to/from the user\n @param positionId The ID of the position to settle\n @return settledAmount The amount of premia settled"},"implemented":true,"kind":"function","modifiers":[],"name":"_settlePremia","nameLocation":"10288:13:1","parameters":{"id":376,"nodeType":"ParameterList","parameters":[{"constant":false,"id":375,"mutability":"mutable","name":"positionId","nameLocation":"10310:10:1","nodeType":"VariableDeclaration","scope":396,"src":"10302:18:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":374,"name":"uint256","nodeType":"ElementaryTypeName","src":"10302:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10301:20:1"},"returnParameters":{"id":379,"nodeType":"ParameterList","parameters":[{"constant":false,"id":378,"mutability":"mutable","name":"settledAmount","nameLocation":"10348:13:1","nodeType":"VariableDeclaration","scope":396,"src":"10340:21:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":377,"name":"uint256","nodeType":"ElementaryTypeName","src":"10340:7:1","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10339:23:1"},"scope":510,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":447,"nodeType":"FunctionDefinition","src":"11026:351:1","nodes":[],"body":{"id":446,"nodeType":"Block","src":"11106:271:1","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":410,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":406,"name":"leg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":400,"src":"11124:3:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_memory_ptr","typeString":"struct IOptaiko.Leg memory"}},"id":407,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11128:9:1","memberName":"tickLower","nodeType":"MemberAccess","referencedDeclaration":7,"src":"11124:13:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":408,"name":"leg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":400,"src":"11140:3:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_memory_ptr","typeString":"struct IOptaiko.Leg memory"}},"id":409,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11144:9:1","memberName":"tickUpper","nodeType":"MemberAccess","referencedDeclaration":9,"src":"11140:13:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"11124:29:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":411,"name":"InvalidTickRange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":501,"src":"11155:16:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":412,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11155:18:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":405,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"11116:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":413,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11116:58:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":414,"nodeType":"ExpressionStatement","src":"11116:58:1"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":421,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":419,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":416,"name":"leg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":400,"src":"11192:3:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_memory_ptr","typeString":"struct IOptaiko.Leg memory"}},"id":417,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11196:9:1","memberName":"tickLower","nodeType":"MemberAccess","referencedDeclaration":7,"src":"11192:13:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"id":418,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":402,"src":"11208:11:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"11192:27:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":420,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11223:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"11192:32:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":422,"name":"InvalidTickRange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":501,"src":"11226:16:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":423,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11226:18:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":415,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"11184:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":424,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11184:61:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":425,"nodeType":"ExpressionStatement","src":"11184:61:1"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":432,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":430,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":427,"name":"leg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":400,"src":"11263:3:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_memory_ptr","typeString":"struct IOptaiko.Leg memory"}},"id":428,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11267:9:1","memberName":"tickUpper","nodeType":"MemberAccess","referencedDeclaration":9,"src":"11263:13:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"id":429,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":402,"src":"11279:11:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"11263:27:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":431,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11294:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"11263:32:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":433,"name":"InvalidTickRange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":501,"src":"11297:16:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":434,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11297:18:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":426,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"11255:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":435,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11255:61:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":436,"nodeType":"ExpressionStatement","src":"11255:61:1"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":441,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":438,"name":"leg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":400,"src":"11334:3:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_memory_ptr","typeString":"struct IOptaiko.Leg memory"}},"id":439,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11338:9:1","memberName":"liquidity","nodeType":"MemberAccess","referencedDeclaration":11,"src":"11334:13:1","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":440,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11351:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"11334:18:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":442,"name":"ZeroLiquidity","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":509,"src":"11354:13:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":443,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11354:15:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":437,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"11326:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":444,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11326:44:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":445,"nodeType":"ExpressionStatement","src":"11326:44:1"}]},"documentation":{"id":397,"nodeType":"StructuredDocumentation","src":"10819:202:1","text":"@notice Validates a leg's parameters\n @dev Internal helper to validate tick ranges and liquidity\n @param leg The leg to validate\n @param tickSpacing The tick spacing of the pool"},"implemented":true,"kind":"function","modifiers":[],"name":"_validateLeg","nameLocation":"11035:12:1","parameters":{"id":403,"nodeType":"ParameterList","parameters":[{"constant":false,"id":400,"mutability":"mutable","name":"leg","nameLocation":"11068:3:1","nodeType":"VariableDeclaration","scope":447,"src":"11048:23:1","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_memory_ptr","typeString":"struct IOptaiko.Leg"},"typeName":{"id":399,"nodeType":"UserDefinedTypeName","pathNode":{"id":398,"name":"IOptaiko.Leg","nameLocations":["11048:8:1","11057:3:1"],"nodeType":"IdentifierPath","referencedDeclaration":12,"src":"11048:12:1"},"referencedDeclaration":12,"src":"11048:12:1","typeDescriptions":{"typeIdentifier":"t_struct$_Leg_$12_storage_ptr","typeString":"struct IOptaiko.Leg"}},"visibility":"internal"},{"constant":false,"id":402,"mutability":"mutable","name":"tickSpacing","nameLocation":"11079:11:1","nodeType":"VariableDeclaration","scope":447,"src":"11073:17:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":401,"name":"int24","nodeType":"ElementaryTypeName","src":"11073:5:1","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"11047:44:1"},"returnParameters":{"id":404,"nodeType":"ParameterList","parameters":[],"src":"11106:0:1"},"scope":510,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":457,"nodeType":"FunctionDefinition","src":"11624:317:1","nodes":[],"body":{"id":456,"nodeType":"Block","src":"11706:235:1","nodes":[],"statements":[]},"baseFunctions":[1234],"documentation":{"id":448,"nodeType":"StructuredDocumentation","src":"11383:236:1","text":"@notice Authorizes an upgrade to a new implementation\n @dev This function is required by the UUPS pattern. Only the owner can authorize upgrades.\n @param newImplementation The address of the new implementation contract"},"implemented":true,"kind":"function","modifiers":[{"id":454,"kind":"modifierInvocation","modifierName":{"id":453,"name":"onlyOwner","nameLocations":["11696:9:1"],"nodeType":"IdentifierPath","referencedDeclaration":739,"src":"11696:9:1"},"nodeType":"ModifierInvocation","src":"11696:9:1"}],"name":"_authorizeUpgrade","nameLocation":"11633:17:1","overrides":{"id":452,"nodeType":"OverrideSpecifier","overrides":[],"src":"11687:8:1"},"parameters":{"id":451,"nodeType":"ParameterList","parameters":[{"constant":false,"id":450,"mutability":"mutable","name":"newImplementation","nameLocation":"11659:17:1","nodeType":"VariableDeclaration","scope":457,"src":"11651:25:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":449,"name":"address","nodeType":"ElementaryTypeName","src":"11651:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"11650:27:1"},"returnParameters":{"id":455,"nodeType":"ParameterList","parameters":[],"src":"11706:0:1"},"scope":510,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":495,"nodeType":"FunctionDefinition","src":"12365:316:1","nodes":[],"body":{"id":494,"nodeType":"Block","src":"12436:245:1","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":471,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":466,"name":"_newPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":460,"src":"12454:15:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":469,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12481:1:1","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":468,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"12473:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":467,"name":"address","nodeType":"ElementaryTypeName","src":"12473:7:1","typeDescriptions":{}}},"id":470,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12473:10:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"12454:29:1","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"id":472,"name":"InvalidPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":499,"src":"12485:18:1","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":473,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12485:20:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":465,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"12446:7:1","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":474,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12446:60:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":475,"nodeType":"ExpressionStatement","src":"12446:60:1"},{"assignments":[477],"declarations":[{"constant":false,"id":477,"mutability":"mutable","name":"oldManager","nameLocation":"12525:10:1","nodeType":"VariableDeclaration","scope":494,"src":"12517:18:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":476,"name":"address","nodeType":"ElementaryTypeName","src":"12517:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":482,"initialValue":{"arguments":[{"id":480,"name":"poolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":104,"src":"12546:11:1","typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}],"id":479,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"12538:7:1","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":478,"name":"address","nodeType":"ElementaryTypeName","src":"12538:7:1","typeDescriptions":{}}},"id":481,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12538:20:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"12517:41:1"},{"expression":{"id":487,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":483,"name":"poolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":104,"src":"12568:11:1","typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":485,"name":"_newPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":460,"src":"12595:15:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":484,"name":"IPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2752,"src":"12582:12:1","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IPoolManager_$2752_$","typeString":"type(contract IPoolManager)"}},"id":486,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12582:29:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}},"src":"12568:43:1","typeDescriptions":{"typeIdentifier":"t_contract$_IPoolManager_$2752","typeString":"contract IPoolManager"}},"id":488,"nodeType":"ExpressionStatement","src":"12568:43:1"},{"eventCall":{"arguments":[{"id":490,"name":"oldManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":477,"src":"12646:10:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":491,"name":"_newPoolManager","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":460,"src":"12658:15:1","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_address","typeString":"address"}],"id":489,"name":"PoolManagerUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":134,"src":"12627:18:1","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_address_$returns$__$","typeString":"function (address,address)"}},"id":492,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12627:47:1","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":493,"nodeType":"EmitStatement","src":"12622:52:1"}]},"documentation":{"id":458,"nodeType":"StructuredDocumentation","src":"12113:247:1","text":"@notice Updates the Pool Manager address\n @dev Only callable by the contract owner. Use with extreme caution as this changes\n the core dependency of the protocol.\n @param _newPoolManager The address of the new Pool Manager"},"functionSelector":"57524751","implemented":true,"kind":"function","modifiers":[{"id":463,"kind":"modifierInvocation","modifierName":{"id":462,"name":"onlyOwner","nameLocations":["12426:9:1"],"nodeType":"IdentifierPath","referencedDeclaration":739,"src":"12426:9:1"},"nodeType":"ModifierInvocation","src":"12426:9:1"}],"name":"updatePoolManager","nameLocation":"12374:17:1","parameters":{"id":461,"nodeType":"ParameterList","parameters":[{"constant":false,"id":460,"mutability":"mutable","name":"_newPoolManager","nameLocation":"12400:15:1","nodeType":"VariableDeclaration","scope":495,"src":"12392:23:1","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":459,"name":"address","nodeType":"ElementaryTypeName","src":"12392:7:1","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"12391:25:1"},"returnParameters":{"id":464,"nodeType":"ParameterList","parameters":[],"src":"12436:0:1"},"scope":510,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":497,"nodeType":"ErrorDefinition","src":"12844:28:1","nodes":[],"errorSelector":"30cc5d5d","name":"InsufficientPremium","nameLocation":"12850:19:1","parameters":{"id":496,"nodeType":"ParameterList","parameters":[],"src":"12869:2:1"}},{"id":499,"nodeType":"ErrorDefinition","src":"12877:27:1","nodes":[],"errorSelector":"bc128147","name":"InvalidPoolManager","nameLocation":"12883:18:1","parameters":{"id":498,"nodeType":"ParameterList","parameters":[],"src":"12901:2:1"}},{"id":501,"nodeType":"ErrorDefinition","src":"12909:25:1","nodes":[],"errorSelector":"064847d0","name":"InvalidTickRange","nameLocation":"12915:16:1","parameters":{"id":500,"nodeType":"ParameterList","parameters":[],"src":"12931:2:1"}},{"id":503,"nodeType":"ErrorDefinition","src":"12939:28:1","nodes":[],"errorSelector":"b010850c","name":"OptionAlreadyClosed","nameLocation":"12945:19:1","parameters":{"id":502,"nodeType":"ParameterList","parameters":[],"src":"12964:2:1"}},{"id":505,"nodeType":"ErrorDefinition","src":"12972:29:1","nodes":[],"errorSelector":"f7b3b391","name":"PositionDoesNotExist","nameLocation":"12978:20:1","parameters":{"id":504,"nodeType":"ParameterList","parameters":[],"src":"12998:2:1"}},{"id":507,"nodeType":"ErrorDefinition","src":"13006:21:1","nodes":[],"errorSelector":"82b42900","name":"Unauthorized","nameLocation":"13012:12:1","parameters":{"id":506,"nodeType":"ParameterList","parameters":[],"src":"13024:2:1"}},{"id":509,"nodeType":"ErrorDefinition","src":"13032:22:1","nodes":[],"errorSelector":"10074548","name":"ZeroLiquidity","nameLocation":"13038:13:1","parameters":{"id":508,"nodeType":"ParameterList","parameters":[],"src":"13051:2:1"}}],"abstract":false,"baseContracts":[{"baseName":{"id":89,"name":"UUPSUpgradeable","nameLocations":["2302:15:1"],"nodeType":"IdentifierPath","referencedDeclaration":1280,"src":"2302:15:1"},"id":90,"nodeType":"InheritanceSpecifier","src":"2302:15:1"},{"baseName":{"id":91,"name":"Ownable2StepUpgradeable","nameLocations":["2319:23:1"],"nodeType":"IdentifierPath","referencedDeclaration":649,"src":"2319:23:1"},"id":92,"nodeType":"InheritanceSpecifier","src":"2319:23:1"},{"baseName":{"id":93,"name":"ReentrancyGuardUpgradeable","nameLocations":["2344:26:1"],"nodeType":"IdentifierPath","referencedDeclaration":1455,"src":"2344:26:1"},"id":94,"nodeType":"InheritanceSpecifier","src":"2344:26:1"},{"baseName":{"id":95,"name":"IOptaiko","nameLocations":["2372:8:1"],"nodeType":"IdentifierPath","referencedDeclaration":70,"src":"2372:8:1"},"id":96,"nodeType":"InheritanceSpecifier","src":"2372:8:1"}],"canonicalName":"Optaiko","contractDependencies":[],"contractKind":"contract","documentation":{"id":88,"nodeType":"StructuredDocumentation","src":"665:1617:1","text":"@title Optaiko\n @author Optaiko Team\n @notice Core contract for the Optaiko options protocol built on top of Uniswap V4\n @dev This contract implements a Panoptic-style options protocol where options are represented\n as positions in Uniswap V4 liquidity pools. The protocol allows users to:\n - Mint options (both long and short) by creating positions with specific tick ranges\n - Burn (close) positions to realize profits or losses\n - Collect streaming premia based on fees accrued from the underlying Uniswap V4 pool\n **Core Concepts:**\n 1. **Short Options**: When a user mints a short option, they deposit liquidity into a Uniswap V4 pool\n    at a specific tick range. This liquidity earns fees, which represent the \"streaming premium\"\n    that option sellers receive.\n 2. **Long Options**: When a user mints a long option, they conceptually \"borrow\" liquidity from the pool\n    (tracked via internal accounting). Long option holders pay streaming premia to short option holders.\n 3. **Multi-Leg Positions**: Users can create complex option strategies (e.g., spreads, straddles)\n    by combining multiple legs in a single position.\n 4. **Streaming Premia**: Unlike traditional options with one-time premiums, this protocol uses\n    a streaming model where premia accrue continuously based on liquidity utilization and fees.\n **Upgradeability:**\n This contract uses the UUPS (Universal Upgradeable Proxy Standard) pattern for upgradeability.\n Only the contract owner can authorize upgrades.\n @custom:security-contact security@optaiko.xyz"},"fullyImplemented":true,"linearizedBaseContracts":[510,70,1455,649,844,1326,1280,1465,1098],"name":"Optaiko","nameLocation":"2291:7:1","scope":511,"usedErrors":[497,499,501,503,505,507,509,680,685,861,864,1125,1130,1357,1538,1551,1865,1868],"usedEvents":[33,42,134,544,691,869,1517]}],"license":"MIT"},"id":1}